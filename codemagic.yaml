# Automatically generated on 2022-05-18 UTC from https://codemagic.io/app/617bb913a05d5e5b137a3c49/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  ios-staging:
    name: iOS Staging
    max_build_duration: 30
    environment:
      vars:
        FIREBASE_TOKEN: Encrypted(Z0FBQUFBQmloTW1IbU5MTUcyaVVmOUx6SUpkNzhJc2JuazJnemRsZ0U0X3ZsdHRXUWJ1THFDbktEMWVCOUN0dDlacm11cWpnOW5zaHBHUGttN3JvaUdrUzNQMGI0ejRQRW0yMmFiOGRMTzR2UUsxdmdLSzBqeVE4TlJLc0FZZVhUaUllTGF2dVFSWVFVdlc2YXI5Wld5VXpJcFo0MlhGNjJVYnptYjdYQklUa2l2WVJwd041R3RDaWtHRjNLM1NPanBhSEJWUjhBWGJKWS1SRUoxai1nNlNvblJmb25zb205dz09)
        APP_STORE_CONNECT_ISSUER_ID: de4a206c-7100-496e-83a5-73e673af6c85
        APP_STORE_CONNECT_KEY_IDENTIFIER: 647N3684PB
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmloTW1INTI0UjJaSFRmeW5PNU1lRnB0Y2Z2NW5ZcXgyMjUyMFplSWV6ZFJqMWxkNDZBUzlhVnJUcmZPVkcyTHBkVHBuUU9mN1dmVEt0RktoUXVTd2tQc2YwVEpQT1ZVYkFkWGJKdEVVSEpEVFNvRExvelo1UWJHZTRPYmZfMzMtbEw3a0hKd0FjMkxRVFliR0NIazdRM0Rsd3lwcGJHc1BTYWx3MG9FRW5xUnNRa21sNGN6T1NxOU1Md2Y0bklHLVh1eTVXWUlCbmV1ejBQelQzNzRkU2k1NHRwbnRhMEd6UGlGcHFacndlanhnRS04S3V1X29XY3lEd2xWblVfc0xoV1VDei1tWGs5Rkl0X2lXekVSakt2OWgzNWVoSExwM1NxSndmdmctMFRua1JGREdzbjhXVUtXQ190dWxzWlI2b1JOWFZFS1BHZjk3b19hbXh2RlRIOHRmRnQ2YjJmdjZra2RxSFpMT25wa18tYUJuenhKR19maTM0eFZISVhnSHdYSk8tX0ljZE5Rbk9sMVZzcHh0ZG15TmZQcmxxQzYyRk9NNURfWUJYRW55cTN3QT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmloTW1IMEQ3MkN5Q2RMM0p6cWRJN29xaERvbXVRWlJMUkV3UWJWVFZleGd3UFVpQmgxY0tHSDlDZU9ZNTBINU1qLV8wRmFpOG9UUXhteVpOU2VWMEZFWlF0V1c5d1p2WFVVUmhLZms4U0w0N3dJd0VYMlR6eG5DWjJsX21XN1RzenNyUnJ0WFB0R0dHZHp2ZWNxb1ZaenpQal9KbXY2aHQ1WkIxWmxZM2V3VWYzNDVud2Rkcjlub2IyalpLSm1VZzV0QUcyTElSSVROYTdUelg4M2M1b0NQRHdpOUNqWUNMS0lMUDlJSlpkeGdiTWs5WUptSUZJRXlZSGV1bHptcXZxMEVxS2RvOVR0QVZ2am1zYnFoalhDSW1RMEhNMVJKa0lvemEtYXN3ZjdpTG1MWkREREJyQnZhZHVVWDVwRTloS2ZhSkYwX2c2YXd2ZmtrUkx4N2tVT243b09sWVphTmpsM0hCa01OcmVFV01QYjhHS0FyX01LSk5jRXVfTF9Nc2dUVmhDbXM1MmJjc0xMVjRMVS1WUjR4VDU1SnF6dkJQZ25jUUpmUjhONTUtWU9NUHk3UDhCTWxKS0tLMmJJbndhdlpKbUJSYmE5eS1YYXR6NlpRQ2NFX01aemttS3lmNjlYc1pyQmFCNGdaUVVpdmdDOGdtZUVBZEYzUC1PNVVYSWlRdlEzVk9BanFmM2RseDhmRDZya3hhOHdUdm5BVy13d083aHdqNlpaMXJoQ3ZwaDRkSHVnZ0VEbXlCbDFQd2thNmFwUHRqcHhGbDVoQUNWYkRoYzdmcDdhVGduYmZBQkptN3RNeHp5S2VFbUMtQ3M5Nm1XejVlNTBJTHp2SThINkZqNGFoT2NtXzB0QmF3VE1DLTB1cThpVWJIZTRCeGRYeGV1X0FQb1d2MkV4UlVFMjFJVkV3UkZlQ2hSa1F1OHRXa0QtdU5aaDBBQXNtZm42TzRWZ3BfY29zVktHOHdvdkJ2WUFubk1WaHZkUjFWSzlGMEwySzdURUxtNkhIRzVhWURSbXFSdlVSSFdaZEVoZzZFbkNOcGxzc1RsSGN1SGkyYml4RVdEa2FCeDBqZmdrU1BYaEl4bjBVNHA1aTZReFIwbnRZa0Jlc19wekRxZFdMV2ZnLXNLS1Z4dGlUM1pyZ0MxWnQtVEgzb0tpS2JtXzdteC1LZm9kSHE3TGlYUGQtaEhUUEdqc2Q0aXJmT1E1bTVVRjQwOE9rcUJOZlRNdHJ2aEVtRWNtUjNCMERZdndKcEpJdjlCU2xRaXNhYnU3R3p0LUxpakJsdHI4WEY2OWRSV1BhSDZnTkFwUDJOVGktb3lseXVsUWxUT2lXRnVIMlBPcHVoU2M5cmRINTUweVR1ZVpoTHFfenBPbUpvMkEtdnVBQ0EteVR1QVFGZjhYSFowNnVvSHNmZnFBalpZbU12TVBDT3BCR2xTdjRNNHhIQWsxb2ZmYmF2LTJXWHJ5eGc1dTJ1dmJoaUJmcW1KUlE4WUhuZGVIM1Z6Y3diRm4zNm10Y1dnRDMxYm5GekdXcm5hbnRUTjRvd0hwSHY2Z2lxVnlCSHcxT1NZZDlvVVIySS1sVGJSaEZFTEpWN1hnTDJQcXFRam9NZDFyMU1LSHprMEpFOFpUaVdhR2huVnoweUg4N2ZLbnZITnJCZVNqaGdCQkJVZlpSSXhRdU13OVZURWxGSkdnUEpYNGt2MUJRSmdLWUJGRWVQNlNLckFzdS1CbEtpbWpvaGNoTm1YTllKUUZZaVlWdEcwZURRbEl4RG1FVE9IRmVGZzRJOUpmaGFmZ0tXVVhrOE9ET2hyTGlsUEZBeHN5ZXluX285RnJWNklDb3UtM2VFbTF6c2wtRXhEU3U3QmE5SHR1QmdOOFcxSWdPeF9tTDJSa3pqWENVR0QtSHdUT0EtdUhPc1hKNzk5RS16dG1taVV0VnZkRHVrY05BU0JKT1YwZ3lOUXBHazBFTnBJSm9LNlhwT3p6ZlBCRjROSUJZYldMbVVSWHZxT01nYVZKd0pIRWc0ZTR3eEpOampFeHc4TGlGU1EzRUt3RVU2SE83R19MX2ZzWmhEOEZncGQyOEZsLW9wTk1GSWdsZlF5SFhqWlJtb0xURGdXYkRJZ25rV2ZuTnlxa1lQYk01RzZQQ3hiU0tTd3pnRXY3SjFlNDNxSm5iQzRwU2ZzYjRYVm1jdEhSQkItVHlHakJtTEFmUi1MMm5XSnhhZjhCZy1rQzFJQTVhZzFRc291clRiNk8zYlVsUDB1WXlQemc2cHlvUi1vV21qempxbWpGVVdqbHVKWERXeFhEbkhqZEhaVkhkQm5XdTh0ZTZvM0pRbHlhVEplaTZWb2xsUnlDUU9qQ0Z6MVM4UkFGenR5cHM3cXpjeWhVeW0xeVR0c1J5TUZuOC1SSXpJbDRaRVdvRGlOUFJmTjBCaVhEbkp1eExmdGJYZExleEREN3N1bVBkanFBT2pwdlZ0Qjk3aFA2Vk1EWFd5MGIwc1dTN1V3bmtDMzVVdEJkTDFDcS1tLWRfZmtlY0laYmJua09CR2x1b0MxZU5PWjZDOGR3TEJMNGtPMDJqN3dOT1lIRzREaUxsUDNfWkpMRUw0am9CMUlMS0xvUExaSzNHb3lXbDQ1T2taR050NHhSNFAwUDB4aTBxNWJXRWRlV3N5ZExUbmIyZ0lWVXVaNmxBdjg3a1l5dWZpNTVMQTFucWxIRUNaNkpNVzNWNzBnVUl0TlpuTVBxeURJTnZpbFRfR1l3aDZqUTRwWmpEX1FDclhqdGlNaHRWRGRMTGFsUzJIMEZTdHo0MDh0N1RNR0lkdlZWVUdrbnZSanRXTWpQZVpDbUhaUkFTUkppSjN1b3k4a3AyQVdQRG9JZEpidG9XRmVPMUowbzJOX0JJSV83SWVDa2VYX1c3dGpuX3RxMHNMZ1hFMndMQ0p2MVpCX05Zbm4xNVVoODlQdkw4R1dMbFV3VXBnQU5kbTVLaGdaZF9zWDV5MDNTUE1waWd6WFlfal9PcWs2cFVXN0dMVkNxejhKeFpqZW1YTTFXZjZQWnRval9NX19oLVZIQkJwYUVQZFRidndB)
      flutter: 2.10.5
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $HOME/Library/Caches/CocoaPods
        - $FLUTTER_ROOT/.pub-cache
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: staging
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - flutter packages pub get
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "tech.getcrunch.crunch.stg" --type IOS_APP_ADHOC
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=~/export_options.plist --flavor staging
        -t lib/main_staging.dart
      - "#!/usr/bin/env sh\n \nset -e   # exit on first failed command\nset -x   #\
        \ print all executed commands to the log\n \nif [ \"$CM_BUILD_STEP_STATUS\"\
        \ == \"success\" ]\nthen\n  firebase appdistribution:distribute $CM_BUILD_OUTPUT_DIR/Crunch.ipa\
        \ --app 1:899655281519:android:e5417a5437e18a0e77569a --groups \"iOS\" --token\
        \ \"$FIREBASE_TOKEN\"\nfi\n"
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - '*.snap'
      - build/windows/**/*.msix
      - flutter_drive.log
    publishing:
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
  ios-production:
    name: iOS Production
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: de4a206c-7100-496e-83a5-73e673af6c85
        APP_STORE_CONNECT_KEY_IDENTIFIER: 647N3684PB
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmloTW1JU0JLV0EtMWMzaHNqN1NsX1ZkTnR1UVJ4QWVtSHR5Wm5iUlhnZ3d3a2JVODgwVS0wRzMwVmYwVXBYLUhsVUliZ2s2VkstZUdDcmJJNXdkWThjel9ZMzN1UWt5bkpVTG1xejdyMG1YUHd4bmJ0Ti1Fb0c5VWJucG9RcGs5aUtaQUlsN2NoalZFeDhIeDlCalNhTV9mQkhmY2RSbGhsSzJuVEF1dDY5Ymx1YkJRT0tCWnEwbUpmanJkUlp6aGNyZHVXbk8xUEFJUkpxVzRmanU5d0tSQU9KTXp4enFNQlJQNjlIdkcxZXV5OVhsMm5QejZCak0yLS1zSWlLUXhsem5IaVBPai1abUdsajJlRzlTaWFrSnZCeWllZ2JLekh0MS0wWnZyZC1BTmdEZGR1cm9odTItY3lDZ1dLSHRJWFM1SVcxaGN0TXVKalVuc2ZucVdKeHVCVjUtbFM0Q19SbWYwX1ZLdDFkQjlkWVdMUVJvY1EyYzNaS2Nua0p1QktJanhhLXFQT0tOSnNlbFZpVGdheTcwQ2NMZHB0dk5RV2F3RkgwODhLaVNQNTQ5QT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmloTW1ITmJfRks0S2c3TWM3eE9CSnhzNGlIWUd4NUJGdTZIcGN2SXM4M0V4Vm5jNDNRUEVLMnpnUTdqSW9LM2szUWY0TTdtZTZIZGdKN1FqOU1BUVFRUldJWnFSdnpnWnQtTnVCRHhuMGprRHBHaUJnckpHVC0za3RGZm1nX2xidXR0UVQtXzdXd3VOX0w3SXMxUFVmb19zZ3pOdlNiX0MzVU1BZy05Y2owRGl5dEJrX3ZOX210SzVMbVl3UTlVRG03MEFpSEkwVFpkMEZfbmRyRUtlQ09TLVdQZ1ZmcjRUY0M4YVFmeHBmTDkta0t0N1JOVHV0cHJjZzlRUVFtajlXTTREdElxSGVDa1FrM3B5SWhCRmdTZjV2OFlnS29iYWFzVlhMMkFsWEtxZW1zZjlfNi1JcmpXSDBfUXRFM1RHY2hJbW5YSkxMVmtUcmFzS0c0ZVJFaXVES2dLRURZTF9YZzBqNjJJM0l5N1pKXzlYbUMyclpKZENvb3RwUjhXeGk5NmtlcmgyVFhwVFZSaHhKU2VXQ0hlWmE1UERzaFdXUENTMm1US2Q3WjR5WXBRZ091bWtOR1dnMGFZTE1WT1JRRHE2Z1d5LWlFOHVITENuem04WG5kN1RETjU5SlZ2SW1aQlhwOG5tek1oV2ZMSnhIM3IxejcxdkxSV3V0d0pIQW1rVl93UjhaNG1Bdk9CY01nYlNzR241YXZwU0F3NzN6b3c2T0NqOFhya09welFMSE9Wa2hIUkZNR3VfcnVzbkozTjB6TzBnV3FNUlNSVFI3ZzRzV0J0OVF1aUhEREJTUGtkTGNvRnhVR2VtUkkzcXV5aTh3M29OLVkyTk9Pd2MzZXlwQVVIZUFzNlk4c196SXdCVElnejNZY3hqZ2d5bHhxZU05Ti1FR0Y3XzdhdDFwUnVONm1Ha0N0NDZRZUd2WEFoVHppek42dmxGS2RsRlo4cUo0bENDY1Y5RzBmMERlT2RJX3JyaF8wQkIyMkkybnZBb3J3ZnN1LXlZMFoxQ2Z5S0hDa2kwZnQwWVlFdWJVYTlqbHYyRFpqVm1iRzhNdWtJaW13MC1KZXJrdXh5QXRheUlyMHF1RXlDdEV2SUkxdDlvc1U5Umx6WktKVTdrUTBXazZxdGxUNEdTSG9qRElHTzRWb2RMQnZEdkNoNkJyQTNtX2x4MnBycGhYc2FISU1DT2RkOVh1aG9lLWtJUldSRnN1NVVDZHFyR2V3cnpQcG1FT2hXRnhCRWlIMUpYT0pmbVZZeGg3ejVwbC0yN2JZNXhoZmM0Z2VzRExRN1VoQUQtTWhQQk9Vc2RyVjNLVWVYekdfUmNRdlNqbS1kRGNhZTJKbWhzUmw5THprQ3VQblBNaWg4YTRQeW81Nll2bUczTUtvSWY1R3RqT09HVFhka1lkM3pncFNndGw1bU90Z3RHeXZkSzNIMzhBSkdfaGpNVDhFdGpQWWlRblRpYVF0Wlh2aU9kaUJMaUF0RzMzWjBtMGtQODlFTmdqbm5raGtSbzBDWTdKNnd4dWtxYlFyY0Z6cVJLdkp6TGZHWlZPYy1aYm5BMHJnVTdybVpmZW1IckNVWHh4OTV4LXRCOEpZMGhCRmFydDFYaFVnbG1vSEtYT3VGVkE2SHhubHZxOGRCQ0t5VDZua1p6eHR5Y3REb0JjVGgwZzcxWHVoNEF2cTY3ZEZwSGhLbTh0bTRscjFsYnd1OHB0Uk9YdC1neEtoLUZYWWVWTUR5LWsxS0dhcnJBdXkzamF5MTV4REtoNXhueDlzdEdiWW1aejJYMTVMRkZXYUdtSlVpdHUxZDhFTV9IeFEtRnp6QUgzT0tLNTRHUjhJSDV6UDN1d0xfTTJHakZhX1l6enAtOUhpWlVOQlE4TC00S3N3MF9oRmR6ZktFa0g0dGt6djNGcy1XRU81TmY2cFlraVdqMUlENEFMVnU2OEFMZ3kzUktiVEtKTG84T0pyODVlb1hkRnZyUHd2bC1WN3psRjFNd2kxSnFVNEZTSXlGSndjaHJQQnYwcHhzaHo3Rjl3Uk1xam8wdHZCTjVRa1B1OWFhNVdfVUlwclEyTFJRdFE1b2RyTFVUU0RwNkpSZkhiZmFLeDR5Rjhha051RkowUnJoNXFUV3F1LUM0X2VOdUhRbEF4WnN1YzJRalNLeWhvdkVVb1ZPMU83VGlXVXBnUFlVSU9RSzBiZHhKNlBGMEN6LUN1ZGUxRWo2MEIyNUUzYzBhNEh4enZCeHVsQ3p6MU1HcVJKZ0xxSUVYWVJtS1V5elRDMGdsaVh2M1V6MDJ1WkpMa1NEbWo3Z0E5RzZfUFU5bW9OcXFPYlFVc2RSdGlHQnBZMXJ2bkZsbm9IT3Axd2FVQWZCRl9kRXJMOGJSTTlzbjFnRy1kcXNsNURuNi1zYWtIcEFxUU95VVV6Y0w2aW0yME96U1ZNdzhYQ1lNM21QUW9HR2VoTV9OUWJCMnJKVDlyMUxlSlJ3bHJaLVBVYWZ0UE8zR1c0QzNHNmlWeXJOS0plUVZfUEducEJib01yT3dFdFhncjM0Mi1rcnFMWFhTRGhSVHRYeWVTUU9KQVc3UEZoRDR6ZExwNV9INVZKTmRkNzBvb2RzNGVfUy0yT3lxeURQNFdJR25ObjdkS0dTNUZjMUdKbFV5blhEUG9kcFpCY3pHSHpxdm1NSDNXUkttM2FBbDNIVGExRFdyRm5wRlRBa0Q0ZFVTTEE5dUxwVUFzamFyb3BiYVJYb2V2N0pMV2xrbjdhSDdhMDhXaXZEVV93bm12cVJ0OXMzMjJZaDhyVjk0YnMxVFNuTFdhcXJndThSMV9iOGhJWTA3Z09TTDUxeDNWSkNXUjZNTHpYTVN3TExVcnUwTXdaNlF2SGYxV3pSa203THUyLWNnNjlKdWZMY0JiVU1oS3N3RFR5cDRHdVlGeXJRWHhSMms0X1RQNmJBNVBaeDBRZjlmYjBYYS04YW1lQnlLcU9hT1VxTm5scXN2R3FOX2RYbjNYV3ZHUUhMclhscjk4cTRPVEpLckZmT3A2YzlSR21obzRpZ0k0REJpYzVZSTE1cDJmUVdHYm4xcFc5MWp6)
      flutter: 2.10.5
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $HOME/Library/Caches/CocoaPods
        - $FLUTTER_ROOT/.pub-cache
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: main
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - flutter packages pub get
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "tech.getcrunch.vendor" --type IOS_APP_STORE
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=~/export_options.plist --flavor production
        -t lib/main_production.dart
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - '*.snap'
      - build/windows/**/*.msix
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - joel@getcrunch.tech
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
      app_store_connect:
        api_key: Encrypted(Z0FBQUFBQmloTW1Jc19wQlZvZDZhWkFHb0o1VnVpSzV2RVctQUFaRnFYQjhXdmZadTRPaVFudDRFbFQ5c08tUzJRNExWeUJzek4tNC01RWd5dWhXLXVEMHE2OUk5cnVsTS0wcHo2N29NLUVCR3FmOHJhWGFJVEpXczlteVhuRV9QVkVyOG1BWW1rdlJqdmUwVUVveGd1Z0gzRnprUV9ZdzVJbnkwQldOT3JxY2VucW5TT1VJU0liSlJ3SUxvblE0SHJxb0pGdkJwQXZ1anh4ZlBNQUdvZnBpX1BvMTN4eXg2d2pmd0lHMENmQUotV2ZJc0RpR1U2TnN2WDZyZjdocGdaMlUtaHdDVVJxM3pSRmc2VUNLQ1pYMW1OemNQTTlvcV9QTnNJbnFZQVVTd2lHYnlPdjY0SXNfQlY2MHU2NTU3MjRHOGZZVlJQNmpYQmVIUUdzVkZsb1g4OUJhUmMteDRTd2hQM3BaR254QXlvMERZWlF3djlieE1DcXAtNVduYUlGcFZ0ZktFYi1LemdDRkkyYm9pLVFVS0RpbEhPVTgzc2U3b09DcGw2WEVKZk9tTUlEamtlcz0=)
        key_id: 647N3684PB
        issuer_id: de4a206c-7100-496e-83a5-73e673af6c85
        submit_to_testflight: true
        submit_to_app_store: false
  android-production:
    name: Android Production
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmloTW1JdkVxNUdCbGJzYzBwbVhENDZYVkgwY2x6MWp2ZFR4bm5BRlBBLWotQl9NOTlIYlZKTVduVzREREhRTVA2Qno4cmpCTkhvMzQtUnd3OFR3S0dQcnlMaHRuSVdGaFdMdTRzakFWTDZvZmZWWVVmUk1BRk9hcHlYd0VHdU1ib2UxQ0pFYVh6ZXRLLUdCMHBKU1drWk9aejNPUVYzVk9UcnNYMnpwWGRTWHRNSHJlbnh5S1dzZlVKYmxIbTZuM2wwTjBZVWJjRnNRbVNtTDI1dUtKb0xtdEwtalA4M0FpWEFIU3FEMldGTjdGTnAxVXNwVkptUFZ2WERUbWVjVnN4WGZfN2pjRlUxQ2x4bEJsZVU0QkMwN1hMQUROWmJfalREajg3NlFnNUtiOTQ2TjNobzFWajNLU01WYmx0NjRJZ0FNV2R0c1NxU0syR3c1U2VNSnlfeGY0ZzEtWkxuSy16THJYcXJTUFphQUpqdXExbmZVM2NZV3dYZ2RiRnFMcDFhN2NSOUVhcVVrdDJvTU5KbS1ZSmpLUjBQc1JXbUc3d21uNFdGWWJCWGtNOFZNc0lHVXBiVmJ0SUJWdlBmZ1hRaGxETWhpcTNCWFBhbkUtMEFIYnpIU1h4b3VRM3A5bVR1WXN6ODRucklCUTRNLUpfNmZfUjZEb25YZTBOcnV2RUhteWR6XzhOYXQwQjBySDJIV3dmMEp4Z3BGUVpQRU9HTWFBaEI4ODV6STdQLXB0cE8xZFFQNmd5Nl9xdGp1ejR0OXBvMld3NzVSd3FWTVNWLV93NHM4NmV1emUxTjBpajBxOXh3bWt2dUNwT3VoZEVQNzNHSHZiUlphSEpzUWp1VzVJZjk2czVjMGJScm5uOHcxMmY2ZnpCNHVkTTBjb2JVbUVfVXhkR2t3YnBBM1gyb0R2M2NrXzU1LUpxTnBlT2ZGZXJzMGlrRlVEb1ViNkJ2UzQ5SmxURjRpSzlwRkhZeE1ONENHNGNiYmx5bk1FYTExZzBiN2FPQ1ZTM0xSXzRtV0tFWktUcDZIZlFkT29fMkJHZ2Jxc21YUjlyMVJITTlPZG4wNmZIeTRZNGZHUFVWWGk4XzFtSGtIbXhRTVYwOEtRLWlQb2hVa293akdiaHZHOGFzNVVwVU5QcVRBQmxMeE53em54MURmLUwzbE9RU1FQbTNCQTFDRmNJYUk1UlctblJPbUpQMldjRjFNMjNUUXowRzV0QXdOM0R4ekV0Z0xueXJmT2pyUTh6c015eE1xRXpqRENQVjdrWkZoc2UzR3V6NE1DQ0hXTlhvUDZLQjFfTVhBQndQT0I1aGFwNEFDX0lEVzNfZ2JVOVJ3cVZiT1RqS0FWVzMyOHpXQ2VnUGxSTjk0a1V4a0JEUld3WlM2MmxqQk54QkxTWGFfRE1VcHNQUG8yOXhDN2loWkdvSUNfbzMtanZ2Z045bGJkN3U5aTRkdWk0Y09TMGRMdFJUX1lLazU0Q1BwWmRhV3A0VWo0VUpsa1NzVlFEQ1kwaGoxbU5ZalRwMWJEdUVrSzl5Zi1GallsRDhMZ1NRNEVXOEUwVEFnckx1OFA4VXExRzZueVAxeFFINFp1VVhjS1plLXFHT28yN0tfOUpLUWdNNnFIa2s0bTdjNGMzNVFJRWVSQVpmMUsxSVpzTGM2VlIwUmk0eDBvSmgxTlJYWnVqeVk3eUlVNm1DRUtvb2dYYmJVTktUMDRLUTZGTlllaUhxRi1Ob3NwdWxPbDhDdi01NzhIU3Nmb0xjTUxHcjFGT0ptMS1fYW5sdHBkVko2M3NRNExScmhfUkhISjBGQ1VmOUpZWVRETW5YSmpOaFpjek5qRGtVU2g5d0RFVlM2MW83QTBTVTZUNWkweUx2dVVKUW1PX21qWEszNXNwUkQtaW5femg5a1dDN3ZmcS1hYnZKRzhTZkg1Yy0xa2hVZGVFMVZnLUJSQ0RFbWphT0hoY2t4eTRRdWR4dGkyQVYtTUd3MVhKSW9iSHRRemJjNVBHSWhKenFsSHdHZ2wzNks3Q0ZxUjZJVGZNUGx4cEhhSkxHdWg2VlRzdU1fdWgtN3FYXzhaRDk0Ny1UdTJyNE9xejg4V2xaM3pIaVU3U01KM01zbmhWcmNsZEdRT243Yjd1cDhsY2NWMDZGR3dqWHVvLTRuajdFOHZaR2ZucGdXck44aGZsYWN1bGk0RmpyQVZSdHNGeUFWdHVmNW0tUDNwYnAzMUE1eHpnN3plM29OcGlZS3I3VnNXVmQzUHh5MVZLcXpoT2lpdGMyVkVSZG9ONGpySmZPZks0WFI2VERhZmIxRnhlRjJGTTBNbTVyQ05kM09pY0tFeTNuWDlJdVI5VWJaN3p1M1FoM3g2Mk1PRWwySUpqMHZIS011TGZFZFNRUDJCSFdRYi1ubkp5M2xUMHlDSDNta2kzZGZRazV2c25CeUZscDZYYVFwX3BaN3ppazktR2xVVEYyUVJXMWJtTGNhdl94YldGUTRVRHJwUFdIQkRIQkpNdzkyaHl5U3VvX1ZHMDV5TjVldWt5UkF4T3ZrZnJDT0xuRXlwZURvdktwMW5mTUkwUWNqLVh5NWo0NGt5THdiUHhvT3ctRUNfTEpweHpBeGIweGktNDU3cThPVnFqQ3dEZmVuaXlLSU9XTFU4XzlyNUVPTlYxbVcwZUlnWl9xTzJFWS02ZmU4djFDM0hVdUhpWndBN3lpMTdZSE44dktONVNHRjllY0RnTmFPRjI3RFZ4amU0dFc5aUpfLV9kbzEzckpIYTRoemZELW05SFNzaXNPTVRrZnROZjVLV3VIUFNJeEIwbGVLMktHZ1BBV2l2YlVjMEJVb2cyNGV5U2xwZXdtWWRVZWdhbGtmNGZyN1dGSFI0WUlscnRGTUpYeXd2WEhoelFuenZLblZMQktvUnh4YkhUZ0luSEhoRTJzcDd4ek1oNW1OMndkMXlfQlgxVWJ4UXo2WTViaFY3cWl6ZjZReEN5ZjV3OXhmdWVYSzk5UUlIYkZwWk4yazA0V190VmxNRUtEV3JqMmc5aW1wWGV0UU1JMWM1OTlPdGtfX1piZnZ5aGhlYWhKM3cyZWZVRG9DVXRpQ0hNckZLbl9ZRXNtOXRVOGFIRjF5SWxYYWE2dW5Tc1lrZFpKTGZyOXV5RjVZTThNdkRpcXVKd1gyV3FlRHU2RXFRTVoyalY0eU5xS2VsbmdyMGUtOTBkOVgzWmFjRVh6RWhJak5YSnIzdXpVWHB1WWhhZTZac2pmX0lKOGh2REtYT1dFanozLWdLekNLUm52WnhfdmdWRGNIMGI2MlAxOXk4TDFMMnI5WVRCbk04UjRxODRpSXJ6TjNyaXRBYmYyMTRUSGtCMTFlYXhUTllTRy1RaHROYlpfR3BjeHpyRmFVMFJhUkxRUi1vdVN2bGRfcWV6alpKazAwRVRRZVNzZm0zWDA3c2hDRkVITlVVV1pUeS1CS0x6SzFSRmNXTVlOTThfLXZxTzUxMWhhTHBnRXN6VE9ZREZYUndJSFM0S09rQnpHWUFsNUNrdG15T1FHY0xlMWZhUnlLTGUyWVJRWnFPV0U3cVBSc2tVNGNYTWo5ZVQwTkxWd3lvQmROVVUwdGN0WkFzRlY0WGlQX1JpR2YycnBvcmJnQ3k0ZWVwajhsaThxbVE4N3FTcjBGTnZiaXhJbEIwR0JnTTVHNTEwbkFqODFVNGpWOEV4b1ppR3p2QmRLYUZ2LWR5eUdkT0JPWmw4VWduZnNIa19XWGMzUkxhcjM5TVlPTDVJeGlJaWpSUmRYMk15RkVnejNFU2VKOUlBZkgwX1hlcDJDZG5aT185SUxMdi0wdVhEUjV6N1dNbXNLb1ZnN0Fhck5SMEJGdlBJX0RZSW5xaFFpRDVOT1hJbWdFVl9GUnFfOEtlVTJ5TU5fckRiQTVfS0VRSDdfRjlNQ0dSdjd1YmN3SnM4Z0RldmdzN1dSN094Ukp1ck1rb3NNMWxsU1QzMXd1WE5EZ2c0N2h0ekVPR3RMXzh3NHU0bmR0MFBNWTZRblNVMjRoSDVfaDNBYkEtaExDcFVxSlBaWDRraXlnOEJFMnRoSmFnYXdlQ0UyOF9iQzZKQWwwNTFBRmtiSGFnQk5feXE4R3BIeGxwdEg5aU5WTWZrLTBrdUNaNjc1Q1JEMXN2bVhXMEM5THBaYk1icURhWUZxM01TS29nVEQ5RXVfbS1TQTR2aFhrZnY2WjRlY1poaUt3cjdNS1paekxiLVRxNUdpMFpqckIwRE9jNjRKeUFkbi05U0R3LVRuZDNVSHh0MmNYcUJ0WUZEMXhmZC1NMkFFd1BYbGoxcDV1U2NRbDJEdjlwREhNTl9DY0lNVWc5MkZ4cWNNWWdQZUJWYkl0ckJuVEZNamhRRXJCWFlPa3FwajNLR2ZtUVVTdzlOZER0YUpvZVhkZkZrbUFGNXNmMzR1M29vc1d3NEhCNjQ5a0lIRHczam1hLWd6cllpMWRTSHROazY0M3VzclZjN3pOdW1nVHcxMzI4TVRSTk1Qbjl4OTJjS2wtWUhWd253anBXczZhMEZqc092ZTZJN2xXbjMzSFp3cE1GbXFLT29LRzU5QW9VYThhamRyVGI0aG80djAzZGpLQlNGc1FiNEhCdWJmbXdfZkRyaU9XWDNxVHFlQVdOQk1iTFI2U1F1dHlXRVg5YnZVX1JOajY3RXRzUmJ4dkJvTnU1ZlJid2JPTm9uQzBNd2NJME4zX2FiaVBxOHFRVUhkSWYyaWZvUlhEMW9zYk41V2IzWUJVMzFXWndJNkJwaEMzLWlTSWJ2M254VHcxV0l2M1g0V0JBN3cwQVJ5cm42TC12OVdyWG9OX0VsRlNISjI2Xy0yXzZsb3hmMnYtR21NMkU1MEczcURDa2lWdi1zMVJRakRLU0FPazlZdnV5dkNMY2hPR2xEeFJEWHBfQ0EtNGFQdFdBdlplRzVKTUhiZ1dKc2xfNGQwYS1sVjRFUk5CRE1lR3VVWE8xR1pnYXhyb2cxT3lOeFgwOXkzV1ltT1FvemZkdjIxamVCalozMUUwQW5fRWU2Z2hneWt2OGJ4Uk5PRGp6TW05NWZocVNWN0NNNzVuMkpnVnNLX3FUMzRtRkRTVkhZLTNlZXJXNHY1OEpwcEVFVlZ1bENhN1pEWHZPX3dzMFhHazZpa1VhQjU0S0dGcE1ZdkFHTzVKLTBSS21yRnNtdndUNlVhQm5YWUtLYU5wa1lOa0dad1gtTzFIN09oQWxWOU4zRGxEU2FrZ0daT0hlU1JFczNScXBrQUFEOHNqdUM3eFM0Q0toOGNDWEIwcTQwSTQ2OUl1TVhHcUJLUGhlSGk2WVdhU3AtLW5TSExJU2YyOHlUaXdDa0dVRE45cGdfd1BtSXBLUEQ0aWpfWFoxM2RlR1BUTnpqZG5oeWd0TUg5QT09)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmloTW1JTTJHUVN6WWFmMWt0cjZwYllLNTB4eVlzRUgxVXhhdzl0ZVhXUVZFSDhCR0E0UFJaRWdiYk5OZjF1aTFGemduekpVR3JUal9sMVl4UGFBMUZBb0FVMUZ0WXM4LTkzWFVhaDFXZXRPWWVZQVE9)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmloTW1JRkNuRWF2RjBkbnJXaklpZFZXNUE1cTNTcUlHOVJzNHlvOC1maTl4NVdKN0tRTmFKZEZ1TG85aGFicHRQZm1xV3FMdlFwVDBnZ1lvd2w2R1FNcWF2cGRTZzAwWEh2d18wTnV3VDVmeUJBbnc9)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmloTW1JUHg2N1RmMUpoZWFQV1BhV2ZWSGc5VVFVUWdBZ0VBcXl6MFhmZGdLajFwRnRhTzlLeERnS3pyazNUQlYxbU56NUVMWlF5RmdCZDZBRmx4c0hDMURzMHc9PQ==)
      flutter: 2.10.5
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $HOME/.gradle/caches
        - $FLUTTER_ROOT/.pub-cache
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: main
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build appbundle --release --flavor production -t lib/main_production.dart
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - '*.snap'
      - build/windows/**/*.msix
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - joel@getcrunch.tech
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
      google_play:
        credentials: Encrypted(Z0FBQUFBQmloTW1Jdm9GZUZiU09VV1dUazVNQThCS29Lb1V0bzl4TllBSnZwcWd0QURFUmJGRlRhbExOaWJGYU1GV0s3U04wbHp2LVBwcmw4UDZIdmZPd3lPSW9DYmJlR2JkZ1lwcnI2R3l2MzlXVWVRRUwyLUQ2VG0yNWxMYnExT0c3QjNvWVBkZUJsSE5YR211WGI0WHZJcno4S1JlMVAtTlpydjhnTXh3VUNHMzdMc2tKRE96TWwwMDR0TmQwY192eVZUMTNZeHhZclpPelF4OW53c3JmWVN5SWdoNXRadnNLZS0zQWtPRFJPX1lUNE9PYkV1T1hEM0pUVk1tOExBX054cmdWUVpDbEM0RnFweTFMY2xhSUJuNGRWcVhaazQ4ZEdTdzJnN2o2VWRydjhlR1Q0VF83N3hXek1QamV1dmpOdThWYjY5UmVQcEJ4YkVKQkNQQWlBdjZPVzZuWDZoWV9aUncyVW43ZWViYkVuRC1kNWZEbU9lZlVUUWpZSlNtMTFFVVdkQUtNajd5eTRGWTV6Y2tzTUt3dTY3aXlvRkRTUXkzUmN3Smt4eDhYdXo3dkRKM0hlU2lPbTBWNllOaGhsZUtQdFJZVkt0VHF1WjhRVXJObGdVR0VYOUF6U1NacmUxS3g5MVBuTHBPRTVBdmxaWnVvdDB6U0JEZ0NzUlpYSWotaEJhQ0UyeXhEb0J5WTVENGVGUVpwOHBKSXhQd09IUjZFVFRBbHZZbHItZkVuTmNHbXNNaFV0U2ZtaU9PQ3MwYUZnUTd4c21DdERFU0NwU242SzF4VmwwX0pVQlJ5dGI5X1RTdy1IbkhnR1NLWEdleDZQTlY2N1QxTlozTWRKeVlZeUpaUmhRQ1YyNUE3UGJDX2xza3ZXbWxneXQyV3JkblZQNzVfV1dCMVE0MFdKRzFnX284RHd6X1V1bzFpQUZfM3hhQ2tMYjZBRTVCSjNBeDMtUkg3bVQwUDhEWEp0OW1kZUVsVTNEV2RFSThsQ1N1WlJ5YU5Fb3FkWXlKT2Yzb3QwMmFmTnl6UEpqUEt4dXdpT1lfOHNLQTQ2LWRES2YwRktWcjZ5MXhuUmhNek1aUWROdmlITG8zZWpFR0U3ZEhaZDQxVjJhYVVDbWJSS00tb3U2U3ZnUjBUT1YyVU5tMGJYbzRtbkp4UEVEMXRBbF9Fc0kzeUZWZzhjcW5kYXJ4cGhrZ21vRFhvOXlGODY3M0NFTENjOFp2Y2VRMUpvdWdDSkpybXUxaXZULXFudFZhQlNaMmxLS3FPX2RFWF9xVkZsTUZRc2V2eHhrRWtGWFlSLU5LYXNidWdlZ016X2VQV3AtdGNCNHJndktNRjVxSTJyRkZreWdqYkgtM3EwaTQ1cl9aQVpiUTRReDBqSENrM3hVM0ljUTNFVHJLSi0wY0NJYkZaVWt6ZW5Ic0prbm4wb2FkRzJRYkpqMjZJMHdJekIxanpUVlQwQ2RYNzFGamRlS0tTQlpTY25Qd2FJdzZvbnJtTzdxNlRwZVFtVjkxSUlNOW5aNnpTeVRJaVdVbnNBOTJYM3F3RkVoZE93a1ctbENxeld2LXhleFNEX1BOV01DYmRlUTd6RFRpalIwOXFid0Z1eWNRUmNVVUdFdTAxVmNicmsxdWpCajRKUEdzSWNXMVU4YzFpLTJCQzQ3V0pYRlp2bUF6MFVRU1VCZXZKeGhIa3FUQUdGczJWRW9LYVJTWW40U2hoeEJLNi1nblF0QWQ2NlJ2Q3hiV01DOHBfRGlvUmdHZkQ5TWdtTDZSRjd3eGNZTUpGRndSVHlhOEZxdkwwVFhaMEVpb1BoekhhcDRlSkFncnR5TjlvRkNDeGRBWGZha0JiSlRKd0F4b2tIQXlXcEtNanlORUxYSW9LUnVTMkZZYlF3N0I3NkoxcnhFTlIybVJVU2tYWmN5UTBOazBzOFlKNGVfUUhQVXQ2QWF3N2I1cmJZYjZpSTZha1p1SkN4MGhySDZWbEtiNEFncW9pUVRGMWdKclk2ekdPWUk2eDBqZFBNQ3ZPZWNiQWxKbkpXZWIxbWFFcVRZazZ1NVVzUzViUG1lVWk2YmRQUDlmSHpSVXE2MzU0eGNEYThtb1BzYTZYdmVJeFl3LU5VMjMwazNqVENWTFRXTTJtQlo0ZENpa3ZzM1VkMFJ4anVVVTlXTXhCVTQzQzBVNmJqSW1mQ1pUVWFRbHhlRlBXWUpuMWczSWJ1Rk5ScVV3ZDBvbDRod3puNjhrSHRPTGNzbGF4U0QzNEd0WTVrQ21mZzVzQW9qNGhWc1d0eTRXMDBXeFd6UkNNV050LTZTWkw3Y1NhWHUxd3JPWnVrODRQaHc1SWgxSUxKYjNOOHNxdzZLTWxkRVJiVkZLMXVvcVhzVVh6Y1JnWkdsU1lGS3JjMjFJU2ttUXFtQlU4amlHcEd1azU1Z2p2R0tTZkM2SjB3WFE4YjlwSGhOazRJNGtBNFhxVXAxcWlEcG53T0xpdXppZWd6d1h2M1d2T0ZNdVBaSC13UURUblF1bEQ1djZ0UzdXVFpJUVZhUDRBZEJhREpfNWdDUUVncEtuZ2hHdU82Sm1pZERBejlTMzYxSzY2SmsxMzAySHRMX2ZtSjF4Um5ndDlDZWlJQUJmVWZNMlpaTU1wYkNhOS0yQ3FLZkpVUXp2SUtjQjA3YThyNW9qSnZRTkVCNm9ZTFpIcHlhREtsNGJDVGM3bDdDZnd4X3pOb2JqR3AyZ1NOeVpqa1pXdUEtbWZLcGdTWS0zcW9MWXFESm5tc09NN042RU1OVjQ5ZU9ES2k1ckhyOWw2YW1nZUYtTDdlaUZOYjFFcmplQk45UDhlVGFNNzNTYW45NzhTakxvOGwwYndKNFFoRUstOWpIM1RfQlZNM2FBb2VTU3VaZHZ4TnExOWdmeHg0ZkR0WElIMk5Qd2gycjVKZ3BPUjJOczFEa0xyUm5KRlM1dk85VHFWWXZhM3RRS0puenVrdV9QRWVYWlhwUzZWYTA1TDdBLVNNeHdOc0hldmlUd1VrOFVmU3BHWmlnb2h0VGtMNGtoeWlOa0V3MWpmQUJNV1NQMG9obGJ3cTc2UGVBQVdDbXBlSE11UlMxSmJ6TG9vSFRWUXRsYU1YbUNDZHhIM3NkaGpLbzk3Mkl6VDJTdFpEZnFOUFF3eENJZkR6VVkyY3MtSjJrNWVFLXYzQ0M4WTRwa3RsSUNYODVOR2VoYXhIV29HenppQ2dWVkRlbG55a0o4MnFUYnZiTkxEWEFySTc5TVhubExfRkdjQ2NRVzdXNW1SaGZUc08xc0hpY0MxRUVXX05WS3R6YVFLUVA0WjNHeHFaUTc3cUZvSTVKcGdmMVZoa1dkRUlNRy1EVU96Vmc2QjN1MWJLWGo3eVYzTmxTZEhESmZSenZvYW9STGNfTTltc1lzVEN5OUN6YTNCR2RDcE9sTzUxdTBHTWE5Vm9PSkZJeWppU1FzWUN1Q2Q0SXExZ2VEZkpHeEtSQUU1UUtkZVVseE9TRk05Ynhhand4OFNGcDFNQ3BLd2g5Y3NNeHpybXF4eURlQnEzVERaOEdPREd1bWp3WmpHbmRtMlBfeVQ5YlJaSFdYUzJhYXhSV3dnSU11cGlHMEVIRUg2UXN6dVh2MGNOSWhKbTNOVktBV0UtWjYyczVwemRhZEVSa3hEbUtEOUNTb0Jfdkt4allqR1V1YmRrSkN4clNqMElLTzBXazJTSnFHUnp6WGNNd0k2enRjRHVPX0lyRlIzb0ZDWEdvMXVHT2NhV3pkVklBbE9jR3M2M0lWdTBSa09zZGpHRkQ3N0NxZi1hNXZZOThmUWlYQ2ZnNjZPREswNFgwWVJRZ1NCa2w4ZzgtWHNLTjBrWC1fV0doTDNnM0NfSmZJZ0w3bnQ3TEZ2Qkk3NlZFZlp6M0FGc0RhbkU5b0gwdDZqX2c0MnBPNW9NV2dzM0R5THlhb3JmN2F5TXNYaWhrYThkempZUW1oUEdSMGg2MDVwVDZXWDZxcXJGN0hOZ0plc3Q1TFh2SUtJZTN4NE45TVZvR0dMOVZzUW4zS1JXaTFyMmJmYmZOaVZ3ZHdSY0dDbzJCVkV6clYyRE9pRExaeDlGbDU1QmQzS0UzQ0ZobU5sR3BLNkVhNFV0b21NTmNSb0dIZWJXMlBUeGVvdVlXNXpHdDY1S0J1cFZkSS1DR1ZCRUt3UlJlYmNEc0R2Rkg1Y0NGdDJRcEswWWx5c0xOdUJib2FrWjZ4WlVRTE42Z2pYUzFYcFdHcEtxMnFhdElsWkNTcHZ4UnJHQzBSWm44aVNlLU4wNl83RFNHNU5PZFFMeTdGNWxRPT0=)
        track: internal
        in_app_update_priority: 0
  android-staging:
    name: Android Staging
    max_build_duration: 45
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmloTW1JUllUbF9aV20yWXdUZEU5dVlIdS1KQ05pazdoYmxZd3VndlFITW04LU4yT005M0VfUFVHZGs1enVhU0NUVnQwMmRpRlZYLWlmN0E4UW5acS0xNFB1SVR3bDVtY0FZLWtBR28xc3piYXQ5ME5FSnhRNVNqdEdFNGthWWtqbERKZmJKei1aUmtORFA3SFRYUjN2bUNmVkxoTmJ3WXNnOTZnQVlSSzcySWxmVHRyeWc2dkYwTGxBUFhGR1UxSXNjbVNHQzI4cjZJWU5hSXV2UG9abWhzejg3V2JGNWR6blJMS1cyYWNWVGRVcGhQa1hLSEg2T0ZLNmFqdlFXM3gtRWRVV3Z5cW81T3VlaW1mbDlqLUhsVTg0RGowemYxdzYwbjk4QVk3a1JWdXIxX2dkeDhWY2lobXIySFMtM0JwNm85WjVsQkNZdVk1NkxRQThPcjRjcm5UTnhLakh1S010UFUyQUFpdWVuT200VEptNkhLMXdGem5sWU1NNThKTkwwQVRQMFhFOEYtV1hFVkVjZ3pUYjVZNFRxU3ExSzNTVGQ2YzBFaThyZTNwN0tzSGM0TEdEdnlidmw2bHUzZmo5alFfQ3NzMjZmVXdISnY4Um1mTlRiME9GMUNsWG9JYWdWaUhHaHlqbjhKajdZMDc4SDBnd2Q0NFNhUEZfZGdSWmMxNXVJX2pNN2t4clU1Z1JtTzRjNFNSTlBmeUFUdUVpNkRPMjk5OWhPNHNVNmRCRFZJQnlVZHZVeHpqcmp0S0hoY19waVR6WHdIdnJuQm9ua1hOU2NaRXRHY2NUZ2p5LVg5TkhBVVdLNHBlV0JPX0h2Nzd2YUpUeDBLZzZxcHpLZ0JzQTFkNGtCUU5nSmZnc0dfWXpWWEtnakdPTXRlWG55QVl1WVlibFpsX1FpQi1pTnZ0SVIxSGNBb3pudUtrVUFSRlZib3hNclJOclVrcmhfVkJnN3lxN0VYV1piOGMwQXZPSnZPUkJnckp3cDl4c0EtMllaOXlnbVhEUWZfLUxFN2RuWldqRUV1TnBIT1V2ZFp1c0wzYy1ERjF5cTMxelNRbVVaeGZIMW1qbWh4UzkwaHZrek96WUlOWU1fRjhfYkYxUWxIcHpDYTVFMldnMFd3M3pDWXo0dUhCVjR4SkZTdWVCeDBTVXdxVUJ5WklxNlozckZ5aG9KMGYxRkhLQ0prb2lHSlhhak1rUnF3ZDlBOVoxUmlvMk9NRHNsOEpSS0VqbFZncnU2bUFxSTVKRjE5VG9mVHNzUjBmcDRxSUlWM3k2R0lIaTVfRldWWThMaDhvZ2w3dWtUU1FFalk0REFCcGFiMndNWnZDdUppWU1BNF9UdU1BS29OMzJabUItY0FhS1Y5aDUweVhQTkRMNjRfNFV0aWxWM0xtN200aFV0Q1RYYXlDMzRldlRmb09kdVJvUVBFRVNkd3E3MEZzQVVObnlsNkl5QU5iOUxWMVNyc1I4bnpucGZUSG9ubGRPbXVtLXRMMVNIWHdpS3NsR01sX0stTUI1WmZ6SVozY1VSRExqbGJaYWlrZ1lWaXgtR2tIY0huS3hXRmJfbGpzWXpoMUlwXzhqd1g5UW40RV9lUVM5TkJNbjVWdU9pUkFrYWhKalZNVkVNQWJFdGtsSVpzckgxekR1WE5LMnB6MzM1VEgtQ19BWW1vMmo2dXp4eEE0ZnJjVmxDQ0pObDFtYThxWXhnVmRnaTduc2M2a0duenk5MDAwN3U0dVdkbXRJLVR6R2RIZlJpZnJaRXdpZlpjWERUeUpWcW1hTWlIVkhIY0xzNGVqRjFZQXcwTTJWZ1BaT3FzSWtleURWaWszT2VRVEVvZS1hTlFScVA5ZzFBeVI3OGhqeGV5Y3NLdk13QksybG1weGhMdXMteFZFcXE0RDNMQXlZeU9laWNoNllLMnZ2MnhETVgyZ1B1V1YtOTJpWHR0QTYxaDBncDBSTGtZcjY5Znp5VE9nc0hQTVpQTmVaVGZyTDlKV0lTemdfZlZ4VzVDV0M0LXdqVVBBSDdhaXFqZnBKY19nM2xHemxMNm1pb1Y1eUlGV0Fkcy0welA0U1BoSlNLaWhKWnBUZWdXREc3eFlLTWRiVGEySjd1YkZnSmMyMGZXTXNTZHlpa0hhNDBUQjlkbU9QREc1MUhhbWhGMWN2eHVYLW9sY0N2S2xGWWplaGU0dTVYQncxbUlQUWJTZHpMRDhNbnhiUnZ2ODBOTHZjSHdEZkE4OFJIdTNxdkNUeF9Fc0pJdHhodmotSlZCb0NJU1J0aWlvdUJlY0Y4VFROdE9SSkJJV2xRT3p0a1hKOUtlYVpZeG9WWlNBc1pBc3N1dk5JT21XYnM4dEIwQUd0aVBCTEhFYmEtckU4MmM1ZTFuRXNXbjhORzh2OVVfby1sQ3Q2bFY5dDdZampIMlE0bDRaS0FQNGJqYkNDNTZKV2pUbF9fQzFqNGZpRGFfTHluM0JRaFhTckh5YzdkSFE4b3pfUkdnOGFiOXg2NGdvbU5oVVhaZ3RzTGhsM2tGM0l5eW94WkRacEpyWGNWdEFDQ05mYnFBWlM3RDZldmozcmloYmhuUWNvanpPVDRYZUtiNnlLZkJLWTEwaXBUN2xVSEpWeDhxRjJwV2Y1QXVVdFlLZVNzRVRmRzhYdDF1X1d1aGlqbldUdkJxbDJQMjZOUXVWbkgyZTRuT3VCUHVqNXBTS3h3MVpjUlhxVjdNQVJ4Yi04b2JkVFhrNW1aQjNWV0ZoM2hIeHltc3d6NHZpQVk1ei14aVlydWgtekFKa1VmQWNwUVdEVzhrVkNoQTBMSGlfcUhSeWptay12NzNPMW9GcXdtakJYWU5ZaTBFMTdQbTV1azkzcHg5QThjMUFGbFlNNzdZeHlBZ1hnZF9lZ3F0MkJ5WFBJX05kWExneW1JMWpPa1JNWGk2NGhMZDRGd0hjMkhLZFdBNmd6Q3l3M0U1dmRYcjc2ekNYS3RtdmdkYTl4Znp0VFEtdTVod2VtR3pHYmd1RVNZUk56Uzdrd0N4ZDYxZERkdTkzU0NrM0V1WGNCM1Vrc3draWdJWmMxdGJiRzBPejdHN01UX04xcFdFdUJ5Vlc0c2ZQdTVORFh0QXNkbWtNckN4REx4SGNpLUVrdllpdF9aaHd0R3lKaEN2QXBnaWhYMkFwUlhCWXhaVWxLcjlzZWhSYS04YzV5VWlOOXhQTzdlekJCT21jRXRqYmdGSEpQQVRxWHhjYXRXd1lfdG0tTXVfaDZ4bHpVclZUaWVKSU1RTEhMZUVFSHh1YlBrX191TDBrNmxUZXFtQUNINkI2U3N1VV83aE1RSi1KSU8yT3dGMVdhVEhTT19qdVBCLTQ2M1oyLUV6UlFiTEZRRVh6QlNTcTlXeklhTG13b0tISnZtN05kMnFvdGw3cW8wRkZEbl8xWm5XRlVTdGxkamotaTBxS2xLZGc2V3NwV3FiNUxkeG8ycTdXRUxVUkREWnl5UFp5SEJUN1QxdmZrcGQ0MnZJT2xLQ0FXN2h2bTI0WmVucmtyX1EyUlc3T1JZZjBoU2ptWUVKeGQtNXpNQ0Q5U1NZTGxQMV9aVTdWM3lsR2FQajFjN2dORk53blBlSGNGcHUxMmR4aHJGY0ZDU2F0NTQxd2g0d1p2aHpMRTNzR0RwbDRpNVE3MWxpdWwtU3lkaEtRa05jRTlFc2tETVRFblZKdXc0RjdzMjZBcGZITEtLZWlvemIxUlVKNkNtVjYwcXB1RzdTT0U5MnNsMGViZjNLOWVYbkp1TDUxWkpLcS00ZC1FbTdVTlFaM3ZyTEcyWE80TU94M3JsU2h6Mk9qWkEyLWpRY0JlVkwtbW1ZcXF4NFAySU9zUmJYd29VTlkwdWdnTTVQbnpfT2lmRGFGRjhldlBXMm5ZZlVyT3VjdUZleDhreE13dzRPMGFsWlBPMDZDbm5RMG9BaTlPc3ZaaDFPVTZBM19lS1NwWEpIbjdzczBibVltc1A2WUZZT0hiQUtJT2gwNXA1LWM5UENWYkZRNHZtQXRHWmtSM2Vya3hFbVZMQklxN2Zna1VDd0lQNU5LT3BjU1hQZDNqb015b2hGZ1I5endhNFZGdzhKNnBxeVNaXzFWcHdJQjZqMjNQOVU0VWh5aXJpbVpPVVNSalY4RXFoVUJDT2JpVlBSVVJCMC1lOU01QU90dkU1M3JvTGpwT0ZTRVFuSVZ2ZXhiQkRmMWUweEhremltVkZYMlZrV2REN196bWR4RVdOSnhHdjQ1UTVUMnhKeDVuMjRadFV2UDY1TDMxTjI1QjhYZ2plb3o5bjhWZlFyQTkzQV91Z0N1a3hGOVpSZE1McVR1eG5yQ2hfNWcyQ2lXRUl6SlZnRmhWZFgtazktWkxXZEN5OHNRWVBkRlQtUUR2Z2RMcndHRnh2UjBucEhqRm5QMkdDNTMxcWc1S01UdWhBUUdnRUtReFlPVUtPZDVDVzZoRU84aE84dzNtaGN0MHZVZjhVTEtNbGhzVUtnZnZqaVd1cWV0ME83ZEtrT1BueDVxdFE3X0F1aTVISG94NXY0WXJwOW1weGd2YXhLMzFqdnRtQk16U1k4c015endUejVQT0dvSFYzalZhTWZuekVOcWlCaDhzVk41c2wxd0VUSTNaTjlzdE93TlJTTnlCR0c2RlVhN3JwNld6NEpKSFk3Vk5abDNEQ29LOTd6eDBfWm5qTndCcWZvNjNPLTJlblBHX1VmVHFPeGE4ZzF0WnM4MGtoYV8zeHp2UVdLZnl4T1FFN3ZlZ2l6dmxVMDNwMU1MUmxsWU1ETXowWmEtXzRmeUJvVFdZVzFkc2RKSG83d3Awa3JpYktLdVM5M1Z0QzludDFQaWE1WUk5dDBKcWE0WFgwUUMzdHNWdXZvU3BKNU1BOFZKSlRLUGJRc05EUktCQ2pEb2Vxbml6M2JNc0otN0RNbGhfM3Z0dUZTT0tMNjd4NHk5eWxYVDFGSXdtTXBIM20weXVEN2QzRUhRc3BSMTFrcWthM082Qmd0YXpjNlJaQzVHLUpUbzY4LUNDX2FvZGI5SzlfSHViQlY4V2NpNWdxendfbFZjbkZEOUxJYUFVcU5YSkV0enJ0dnBkTDMxdkF6ZXBkaHpqOG9Rdm9tTEJxbTI1MDh1WDRNbjZkcEFQS3pKclhFNVJ1VUp1M2c5M25FcVpibndlWXRQSkNOdlVwY2pBQmY2dUFnM3hmVFB5YWI0Ukc5RWVsRVhBYi0tbS1XYmdhSE1VYU9VdEwxRWVCaFZvUU4ybDU1MWM4SlQ1RWJBcDBnSVJPNThpQjQzQ0wzME50cjFjUV9hRm9MZG9jWHRrZHZHSTAwTXlNQVJlQlFWQmZUMDc1czRBS2x4OThqZXhmRVlNZjZXcHdHVzdKY3pWZmtDZlI5UmdzX3JTeUh1WVdIZzhXQT09)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmloTW1JeEwwNDhGRDUyc0xCSHM5djlUaXBKdklNTXB3eG4tU2FWTjBTbDRmZFhWMUkyU3VQZkxaTTJpMzNXZG9RdlJDcXF6VFVuM3Byc3V3N1loR0gwdk5XcW4wZVVLNy1GNmJLX0dHSTJkQmVOUFE9)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmloTW1JWkd2SW02am1SUEpEN3ZubmoxZFJVejlPTTlkUnN6NGlyUDRxZ0NDU0ppcXRDVVZ2TzFCOFBpRU9fSEUzT2RQTHFEcDFzeHcyYzViT21xRlBqQlFZYU9HQUdGeEJBazBRY3B1YW02bUxhSFk9)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmloTW1JNTJKV256YjJKVkNGV0pzeml0M2xubERSblllcm9xUnJvMk1HVFVZZkJyd2o2TlFDRmZxVVA2dVFLMm9PQlVjS29qSjVYMlVKLVkyRW5DSFBFZlJkSHc9PQ==)
      flutter: 2.10.5
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $HOME/.gradle/caches
        - $FLUTTER_ROOT/.pub-cache
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: staging
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk --release --flavor staging -t lib/main_staging.dart
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - '*.snap'
      - build/windows/**/*.msix
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - joel@getcrunch.tech
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
      firebase:
        firebase_token: Encrypted(Z0FBQUFBQmloTW1JeE1WZUFHQzNKWjFkUTZqS1JycHQxa053M3lsckc3QlExcFA0X056VnVGekcyV1VKbURLYVpLSUgwR1dNaENFZ2l1eVFuQVNnQ2R6OUZuY3BiQ0RzMlhjZjlTUmx0enJibzI5c05iTHR4cVg5QkM0VkhHclpNcm1qZmJDRlM3cjNDaFpKdlBCQnNZWTlZVFNGanFKT3AtVVpYSDJwZUJQSGVGOHMxcDM5UmZNVlpkYkpDZV9zWlBvcDV0d3ZBYXp6V2p1cTkyV0RlSjEybGRZamdpdXlvdz09)
        android:
          app_id: 1:899655281519:android:e5417a5437e18a0e77569a
          groups:
            - android
