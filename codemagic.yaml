workflows:
  pickup-production-ios-workflow:
    name: Pickup Production iOS Workflow
    max_build_duration: 30
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: de4a206c-7100-496e-83a5-73e673af6c85
        APP_STORE_CONNECT_KEY_IDENTIFIER: 647N3684PB
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhnNThFU3pqNHhsMjN0dWo3bnEteFZfU0ViT3lxTndETDhWS0FKX3ZtTGVtdlJVX19jaHc2T1hDMHNkVHpTVkR6NTNFM3BKSjBCaThYWFBZYjFqZXlaOWluXzU2T3doSm9ZcG1YcURRb2E5cS1MRnl2c3M3UU9oeHphRWFRZ1lQRUltbGt2YnJvTkkwTE9ncjVUdHFNR19DU0pOdFFFOUhya3hpVTVsTzVwdHJjRjg4N2lLTWdjdDZrZ2JMVlYweVg4Z2xUcFZWaUhPNGJtSjI2YlZWR21IZmNzaGZBZVozY2dUSVJtRGVOdndNZGxHT25kdS02UXZ6WkpvYndReWUtdm5UdWJlR1ZOYzBXQmFpcXEtZDVMNmc2MnZhOUJRUWhjN0ZrdmlkRDRfMmJRNmgwNlVveFV6WWgxU005Z2JKV3NVejZWZlNLc3hneXRmeVJfTEFMeExzcm1rTDhiTHYtV2s0SndWT0gtS2E5clptTUhxWk52eWRMMm1tQUlESmRSeXFaTVJMaFZ0ZHdTWHlTZUwtc2J5RlhsNEJOZlNvY1NSY3pRd3JtZGJkbHg2ST0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhnNThFc1BBVTdKODhvMWFJX2pwX0NicXRsc3FPSmlUb3M2Rk54VTZ0SUIzR0pKaUVBRzlhTENoNTdHdFFFYTRNbTNPMXdHeEZSWGFzUHU1MWdfOTIyOFFLQUV5UXBIc1FpQ1hXQnFZeWVDNzlYblJsOUdHNmdBUGRVcmMyUHRRRjFHTzdEREtjZkY3RF9IdWZNWjJHR0RyUmxBcVFMY1hfVDh5X3BQUkMtaHh0dzU2RHQ3OXhnYV82RXlnQWZzWXQ4dHFPcXRJOFhqQmtHYTAwbndDWDlOdVR2YVBsS1J2OG83TExBM184c2RObzNxbEN1UVpNT21MamZnYUJPZUVTdnV2NEQxaVktNzdwVDdKVktVNEltNWxRTElOMGNNYlpHbmlVS1JFRWdneUl4NUhOTVpXUl90dW54N1pzUEZNTENWQWZJVTNiTlJtSnVxUXc2N2JwWVRIZnNMazU4WW51Tm1UdVpTQlhaVUVBRHFJSEdPY3FrS0ZMRXY4dDJhZzVVNWd2ejlRYVFUOThINHlodVhUdkQteHVNQVFkSVlGWVF0b2k3cXNPeTYySFdYUDctWVZVX0RXczBlUi00ZUw1ZUtkQTRBNE5xTmhNam1NdUdZVUlwNTJUR2FWZlFCYzFoTHhMY1lqeGQ5TEppY3pGNjNkUDNuMmtGWmNucmpSTV9idnEwbjZPQW8zRG9wc1c1QVhGWlZyVDVDWENCX2Q0ai0weGltUjV0dE1POEc1bmpHUXNHUTVDbG1OYWctWFgwQUpVVDNSMzVIVzBWWENUMFpiOV9KZE43X0lPbUNrNFJvNHZycjlHSmE5XzlWMENoTlhwT2d2YUEtQTV1MlM0ZURPSTc1aUVMZHFvUGZEMEpFTmhFUExHWDBZdVpCZ1dIQ1BJWUc5dm9qRndPMDR6cGY1U0VVSG1vWHRIQlc4YzVUZ0FibWtxa2R2V3NEZG41VUlQcWMzcDREY1AxUkxDVGtsN1FUZjRSV3k5bUQ5LXJwZ2NXaHQ0ZHZMMXBGQm5DNlY3TUYtSUs4RmJpR3BUY29MOGR2RUJ4VGpjWmhUNXpBTUd2TzF6NkVNekhjd3NTZkJDNnBuaDNFZklhREhaVW5ReTI4ZWt0Um4xX2lkaHp6LUFoSEJlMDBHbWFiU2V1QVRBb2IxbWVTSDNlQ2QyUFpqMy1KV1o0ODJRU2d1aUFHMEtwb1RycDBFclZ3UF9BMGZ1QUNXQV9HNVpQN1dRcHV5NEU3MzdyYnVNTHVNc3RfV3hiTF8wVGJlNU9WNzNUeklBR2dmS0FhTEtUUEJfNTZCTnlmN2duRFFaRzZmd2ZNbXRsdWJ2cUV0dFYyUWhTejk1NkVSVlJuT0M0Q1ljWGR4MGdrTFFSNkxFdzNNQWhwWmo0OFVGZ3k5UmdUb1d5am9kVkF3Qmp3OXBqbXVCRlAwVmZoVFYyb05yQ0U4WS1COUNVUGxjX3RhcGQ1RlVJdDhsSEFXR0hmZm0zR3E0aXlFUHhDLU5hY3Bjai1xS01iZXVZYWRDTDJtYy1xZldwaTF5V1BNNU9hdlpPclA5ZC00TTJmb2NDNHBRS3dlWmlsZ0ZxM3VCUUNaX3RvRXBKU1hIR2J5S3B0REUxeTJUZUt0T19xUXNsMngxdjd3UEJlVHFKV3VRc05RS1puMmZoYU4xbHJObTJJeGREbkdRek1RSlZqczMtZ0s1em1FWTExTENNYndGMmc1dkRQVjRlalJLZ2tzWEJFWGk2R2tWNVJEb0pYZ1pCdUZBUTZ4bXItTGRFSG9lZnhsNEI1NjB5c3BLR2NzWHlYQzFnZlVJWnIzZ3NFOEFIVERaVGoyeWN3ZWpOMnFPd3ZUUmdBUUtBUlY4NktYQzVGVWh3aEs5bC1teFFyRmg2UTZYVUlmN3pOWGt4dVR3RTM5VzFVMXQ2T3hJR2FRVDhsR2p4bm5RSXo5OEVENFloZkVscDZDUVdNRnNQRDVwRndmdWx3c2xzQXpDbV9sRUV3ZmtYWlROUzZSTGdURkFTRTVxY2JabFNGXzZVY29DVEpucmNwNW4xejV2dWFNN2ZyWXkxOU05NmFqR29LYTF0MGJENFl2Wk5WcVVPcHFBVzIxUmlSVUxiX3dkS0pGZEt1aUFxWFl4Q0Y0ODFvTEtaOHNvMlY3Q0pXa0tEYzNOU1JHcUR2ZGlzN19URlVnTnh4ZzZ5OUNMOUtMaVA3TjRjdFFpWHc2aE1NTE5wQkhXdEFya2NhMDVwWktEOXVSZjM1V0lzZm83aGZJOFliNWFWa3VJdEpDLUg3SHN5WEVqTW1MUHoxV0J4Y2dCOTBFZVdpM09mSU9aY0JYWkFoZDAwcFhZd1VSUUtUUjFzZHA4M2xTY3pSUEZneVlXdEE2bnVmU1dqbFY4WWxZXzFNNE5ZQW42cThBOS1fMllWMXR0c3htYU1YMVlLSEEyLXNQcm9vOW15dUl3RkF0dzgxV29aU3R4VzI0Z19NTzJjQ3ZMRFFPUlcwZ0FrRmNhaWF3YWJ0QW41clhpWTNZbEdCa1hCelNoUWVtVlpQSjRUWjNHN1gzWHdCT0dsY1lHbTVTb3pERk5OZGpXb2tURklrb3NRdjRyUU5XWm9RcWFuUXpkckhRNHlSYXJFSWVpY0VDYVl5OFBtQ3lfRGpVTkY3VFk3Q00zNnZqRlh2UkdrZUZxdEV1OGV4alFldFVLZUVJYmxpZFpNbkF6RDlJaVRrNDl4Rm5yUVprd2Z2RTRKUGtzc0k3NDdUZ1ZxbV9rMTV0ZVpvQTFDU2pteGMtVVJxSmVVMnFNcEZ1WEM1TW5BdF8wVDRFU0ZtMnYzaGlnYlJ2bnRNMHVuN1dXNC1XZFJxRlppSGo3Uy04ZHJnRnRid1hLWDd1aVd1eVhCYUdRVzVWNE8tSGxyUV9ERUx0bGk1MjdnRXZVdllKUFVVdHZma2ZPWE1oQTJ2dWc2YjVBb3c3cmVZNWVHMENQQURjRmJnejRfV1lnODhNZlhxc0RFMmVpdkZwVWh1Z3pWXzVwRWtmZ1M0aE1hX0dyOTNGZm5obzlEdkZuMko5VWEtX09zQjRhdU1GRTE3Z2Q4R2RE)
      flutter: stable
      xcode: latest
      cocoapods: default
    triggering:
      events:
        - push
      branch_patterns: 
        - pattern: main
      cancel_previous_builds: true
    cache:
      cache_paths:
        - $HOME/Library/Caches/CocoaPods
        - $FLUTTER_ROOT/.pub-cache
    scripts:
      - flutter pub get
      - keychain initialize
      - app-store-connect fetch-signing-files "tech.getcrunch.crunch" --type IOS_APP_STORE
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --release --flavor production --target lib/main_production.dart --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
    publishing:
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
      app_store_connect:
        api_key: Encrypted(Z0FBQUFBQmhnNThFd2U0Z2kxZnhuQ08yMUNmbEM4LVJmcTY2TUhLNU04NThTdWg0bzJMcnVrWGdCX2tyVWxSOWVaOERaVURNYk5ER0VyZ0otSVZKczNleHFYWEZXSjREU3N0Q2xycXNlWTNIR0o3bFo3NTMtLXQtal9HU0NNekdQQXpyRTNJWkpEQXYtRXJva3hpcnc2WEJlU3RJRG5mdjk2NW5hZWJvWjRXSmlGSGxkMkFiZmhNeGtUZlJpUHI2TnBqQmIzU0FEZkctZ0RqMjRsdXVUUkdWQ0VUV0tJQjdxYURpZ0dFNUE2MDhLRm1VOWRfTFRjSk5iV2kwalhBTGVsdGQ1TFBRcEhEZ0NFRGxrYVFMU0x0TEdvS1BDQ1RJNTJkdzJiSGY5dWxvLTVicXd0dFgwM0ZEeUFiS05FdWpNTnExMi1aV3Z4UjVjd2p4X1AzWktCOVZaR3NGVXJIb3owMDdSSjk1ckp3RmRkZEJIU0V2QWtDTjZycTdaajRSMVMxOEZXeTZrYW9DTXJDZzVtc3BCVTYtYThsUWJmRHVBaFZwaEZ4UF94UGFCTGxGcTZkZzItND0=)
        key_id: 647N3684PB
        issuer_id: de4a206c-7100-496e-83a5-73e673af6c85
        submit_to_testflight: true

  pickup-staging-workflow:
    name: Pickup Staging Workflow
    max_build_duration: 50
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmljaDlZNjh6YTQxd0ZoeXcwdFljcmJiNHhPdnpacFdWb1VvMC1PY1BkM1VyRzl5aEhQOGtZSEt4eERZQWRiMDZlcGFqZHZVUE5vdW5rTUkyanE2aHp4UGxDbVJtMW9PMlJaNEgxOXRHaTd6Y3NGMklsNElSaXl2SldxSWNmcWhaVFNyX3BoSGdsUU1hZ2QtcGVzdU01QWR4YXN6d2FvaGc2TlFzR2xsbjJkenFMTU9tTy1FRVpzUGxBWjRETzZieFRSTllNbUlGVVFPenNkVnlsRUw3TERMWGRfYkVjUXU2NDFubzdCMW9ENDdFSEotUG93RFZwVHlHMW5sRGQ2c1EtdHRfOG1rLWFpclpMWVFRVm55OUJQcnhuODlJdjRyeUZtWThmcEJlM01NenRRbFQtYmJKUi1WWVREZGNPWHZUMmJLZk4wSlF6amJENHdqUkRXa3lTSFcyamlTTWJHZTdTc1FpOF9FN195NW5zVXRpU1ZvbV9mX2Q2WERRMkFtSmN1RHdaSVRCMU1pU1VtVnVhOUNuMG42VlpldTI3WXNIczJuNjZXNEdoQ1VQMDhfdWdDQktrVXZhb3R0WVdkcHFJN04yMkZjVks4ZWxCNU9zc2xRdndYODBSVXRHUXVZYWpSU1FVTTV2VnY1bFZXYWJhWmJvTFBYUzN1S0UtMUJ3dHBJRzhuNy1nN2czeUtMVEtlRzVzQnhrd0xOR0c0bV9JWmVhYTJ2RWFfSGFBN3N6Nzd6M1ZOY0FybHFCWEVWYzlfd0ozYmlSamo4cFhab01ONjRoRGlzTGRpZ2pCMk1vQ1NnQUNIWHNDdE1OWlpCVjEzNy1yY2ZDTjRwTkN5dHZDNHVfY2tmRDdieThOM1dMU1FUakwwd2tfT0NNVWFqYkcwWFpPS2NFVTk1clIyV3FrYV9RVVVqZHZ4OGJaQ21Qb2V3ME5GNTczSVVVV3RWTC1LanRrd0hfNjNPdmNiY1dvc0FwcVd0eTFFZHpHbzN4eWJHZUpnVkNiZF9rdk5JU2V1LUJteW9vTUFaOVNsa1ZjOGhxOU84VFRnLWJmRHBpeDJ6TUtlNURnSTh0R0FYTF9zRWJDdEhILW9BYnRGOXNOS2dkdXpTZi1OanhFM0p4OFBhcV9GanNFcmlfU2ZHbEN2ZXNrSjNZOVBJNGRadHNBc2dzNnZUX0VrNzJvcGFXd2VZLVlHbGNQQV9YRXR3TUlrVDZaVHoxaDIwY2pVYXZLWmhpX1RrZUhMbEp0ZDV5Q3ZROW5QY21DQ05rQzVmT0lLU0Q3akZXVEEzRnFxQmJhNjF1NERmR2pSNXFaYlA4aE1qSWRfYkt5UWQyc0NicThEdHJzOXNGZ2dndWFaNkxsVEZEendwR3VPM25qdGJRdnRiM3dsb1pCeXFPOWphczlqWGlidlFGbS1oU2xPYWFkYlRsNnBmcGRVeDZPSzFIbThrdGZPdjE1eUN3MnRSa3hxekw2U3pWTmZFd1BsQWxpdVdFdGJOT0VOdnVfMWZPNWxPRFA5NVp0T05vN09wakhNd3pmWEc5SXIxQlpWOUtOZ2hxSkpjNGEtU3c3TFRZQTdxMEVpcnZwc2pJZko5R2xWbDh1T242TmRoNUNpR1QyeGRFYUtnMUNKRmZqZllfNUcxd1U0RWJnTVpraFQ2N0NBVXA1ZlFHeDhReTJiaUMwNERzMEdEanotSjNqY1VxT3ZaTVY5ZGlTdlBzWWFmUzV0eXBYblc3ckQyUnVWV3kwd1pRcXpQeUg2YWp2TUVyeHZBcUkxMXlSbjJlR1BXMS1uVk5NQzVybk40RlliZjBxNUptZmd0VWI4UlVKTC16TGpvZ1pUWkNtQzNMa2pnRzRYd1RXQzdSbGdRUHVpcVRKeTVFNUFzNDNlWmlNNUNFWUgxRjRVYXk2bmpaNW4wUmJwWlY3clJ5Q2JtdFdRU2ZWRkJZb3F5ano4SWpHZ0hTUHhJTXd6NjJBdUFuTnlMTlZoeDhGNURkTm45N2h4aHJVZUNIeGxaZnFTb05vMmltUGxESDlOTEdSTldjNXF1VGFrWk9GWFFWdFY4UVZKMW0yZnJ6bUFoc1dqYTJuLTN1T1UwSFNrMjFwMmhMNWhhUThZT0tOYk1PcEZYMnE1QnFJaG9Ka1FRSEp6NHI4eVItQ0ZNT2o0ZlV6dDVwc1JBdjQ2SGhVSGhyYW1ycVB1Z1A2NGxGSnhYQ0hFdHFIZnlnUE9Yc3lwQnlYRW9jeGJKMWNtZmFzdmJULXRzdU1tZHhDQjg1SHR0UVdHMFF5OENTTGxycDNVQk1ya21VeEJURWQ3a21UUHFvX0s2eHFtcVowWTc4dnlhT0ZLSzh2bzdKX2VRMXh2WF8xbTNScl9SSHdiUl9DREVFTms3N20wTW1uQndvM1ppZkNlTUJ2VHBkTWU1WjdhSlRUSDE4dC13czM2aWp3Nkt6Ui02anNXdUpEcEJEb0FveGs4YnVsRzRyQnFWc1YtUWJmNE9sTTZFSlRhWDF3Tmh6b3FCWV9tTXU5V1NQZUpwT2tMSWh3MGo4b0VnU3ZZbUZlRURKdUVSQlV3am5aeE1WRVZXS3pvWVAzRXRmbmhiUTI1UWM5N1FBa1lBUWZ6S0dyWnA1Sk9nZGpYVVVWTmoxbEhyVGs3Z0ZIOVdZOXRueDBJOGxHZExyZjBvNjNQYjVqSnc4elZUdF9GOWFvamVCVFRRMDgwUmgyRVk3UU1hV2V1SElJQThPZmZDcTlSUlB0VGh0NkpnOWFucUUzWWpHR2tZa0RBTExmdGZDcXY0NHVaSFRuYzlwbkNHYS1ENlhucmVQVGJzX3pEdlFLRDM2TzhUWVNGa3JOTzJlVG9rb3BVenRKWmF6dEZFU21felRZeVUydy1XbXFkVmduWHJ6b1FzT2dpTVJDNlRUT3VNbVpldmRtVk54bVZFQUs5cUx4bGVVTkxDSWZ5VmhNaWY4c3dNUUowNW1YOHFJdzFiMF9EOHlkM2FxZGdZRUVXMjQwYmJZUGdxOUJDNjlMNWpUbUNNTzhSb2drUXNZdG5lZElWRFRKeElIVFU3YklsSEhEa29sU0o1YlUyaWtlVzAzaHdYalRYLWhaV0xVX3R5cnBHTTRYY2JQZDB6MzZYRjBTWXJpYnZqY3FjeGphUkw0MzNqbW54TWtVUWlGc3lSVm1wR0xnS2I0RFNSeTVLb1RtU3pPSDlmMG50OVI1RlJuZkZzWXppREdsY3g4SUV3WnhSVjU2d1FGTDNLdk54Wmtid0ppVFBCUEMzcVlUUXBuOU00eXY5MXdybVQyV0FablhLTjVHLVJfMGMxdDFRM3JXOUFwYUhvUDBLd2NTMWlRMkVMUVNsQ0pWR3gtNmtpdFdnS2hYa0lTUjNiOHhyQ21YOUt0N2gxV2Z3WWV5dUlnZjVNeUpYT2p2Qk9UUjNKamw1ZFAxcGoxU1NyWWtwMlVLTVFYdFVsRHZYZG55c2VNTWM3YmQ5c3VlR0lQanplUmM1cjBja3NmSWIzLU9ncEE2blF6azNzcVZQYmJHNnlUUUJWZ2ZzUWhPUW1pQzg0bW9UN1VuZjFENy1aLTlQZWFYTFVfQXpXRUVCa0dONzdPSGVLQThFZWFYQnFZd3NGMVpGOUhhSC02UnpNYXU0VHZQSHVGNVVLVXo5dVZNSVBIblRuTHR0Q3BuRnZlUTk3TGFEWnNJZWlXeHRIZGVBdjRGNEN2UzlSMWdyME5yZzNPS3pSYzNLZklOWGtISzFidnowZ3QxTHRTWGlLYURwREVOSTdvb2oxWWExRC12b1gydzlOYlNKODN5a1gwNmx3NVU1dUpZb0xqcmNuX2g1SWc3b2xObncwdmItOWJ1VGQzY2RJWTkzczhTUVIzRzBVRVZlakVBcjZuZFJ5WEdQUksyUHhOUFhQU1Z4QkNpVUVTbTJkYW9iTFRlcWFKU3RIMHkxQzhySHM1TnRPeDVWYW9jTi1SRkhKeTF1XzNZcUNwYnJWTHlqWFBnVGlzMk5zaGF3blVKeFhtYnFLLS04Nmt1MTBLcFNwTHVHSzJxckkwS3kyYk9vWjF5ckg5YjBjczF6QThLTEktclhxRjY4ZkFzQUJyWU5jOFBFYVFKeHJWdDRRS2drcHJZeEhQZlpoZ0pvcnJjMVZ5YmkzUnVDVXA2LWJIaWZUUTRjZUpvaFNIcWlJek9mVEtIdHhuVTUzbXA2dmFobnI0VlZmR2JtaXdySkhMWTVPSkl4WFlXVExVcTRlc19xb25xUUl3RE1PZlFobVhnM0ZIZFdzNi1MTUh0Q2tndXV4RWFUbnMwYjdyUnVpZWtMN2ducHozTlhuSVduZXlqc0VKYlBhTFRoUlNEbUxXMklQUjRSYzRBdFhtaUNQaVJKS2x3RnpaYmpYTG5UOGZiTTdzZGpNWWJRVFVfbzVYaUtEUXhuOURRZFVJS2pwa25Nb0FxRmZ0YVNqbFJfZ21kRTYxVml6Y2JhZ2tRb0FHaEFrSktVRUdnVS1LdjJ4ZWN5cEVmdEdqSW8wVnFpc2xDNVEwNXROaVRiRjAtUnFUcjBseUNWYXlRRkNOVG1JTmZnLVhPa0N6QnV3NGJON3pFZWk0bXdOMENKQlFoS2w4MVNUZkEzOURyWFdqZHVET21mQ3dqWWxpUkdtZFdIRUoyMXZNOGlLdTVjVVJjck1GM1hwcXBNU0ZXa3pyOXp1Uk4tR1dLbXd1clR4alV6RjhWTlF2Rk5NX0VCOTJYLXYtdGw3SHB5ZHBpQW5MNnhlQ0JZLU9ndEN2Z0xIOVUtaDNXWFpMLW5jZkxVWVd0X3NrUnU0c1pNc1FTQmhHSTkzblZ0d3BWNGZ4TkhSX0l5a3VFYXYwRUx6UjVMVHV5UU1TXzRXdXBQM2kzeEJIekloYUg5OFp0eS1WdWllX3lMVkJuc0NpUHZnbVhBX1JGaUZSRWY3QTdrY096ZTlRQ0VNcWJZb1NwTDh3R0ZkMnlCdjhXMXBPZkh3c0xXMXAwZjRobTJiQjFUOTBkbmtLRndocWhkMnJDNVR6enVKal83NHh4WG44MDNrTGtMam9tRzhFQTR5RElaYW5nZzEzdDd4UHF4cGhFUGlXT0gwQjJDM2F4VVZLNjVIZHNKaWFRRGxkYXh4elBDcS1WQ3VrR00xYm5Cd1E2WFdIamxadmxXZXJYUVRoUXNmbDQ3UHNOUHl0NWRMY3QxbFB1VGRUdk9vUWVYS1dWbFVhRXgwbDJyY3otbHBfaWF4dUtFUl9RejJnMlVjTkhIOHlZMUlvakdKbjhrbEo4SFdoX0Z1OThjbjlhS1ZQYi1YdXNCNVN4VjZLR0w4eDFVV0FSZGEwNEdDVjFwSkUwQjZuYmlZeFZ3NTFDUzBZOUxRRlhQOGtPSHZvQlAwVGpyVTJvUDlVcXhaU3J2NUNqYnNyb1N4bEtEQT09)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmljaDlZQmtLX2lQSjY0eHpScGJTOVkwMlk0Y1pGRXNCQTV1YXhlZjRPdG5GWlFrSzV4Q1kzUGJkczV4d1k2VTN3ZmVyUU9aM3I1dDQxSm1IeXNJLURsVnA0X0dUYUZTT0d1OUVwTlR4UU52WDhhc3c9)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmljaDlZdmgxSmFxTkFfcXBsT0lHR2ltdS1YMjVSWk1DYklxRGxJTC04QjEzTUNEMllEZmdwVjNqYXEtTG5hSUhJeFRRYlNDZW9lMU04d2NTMUF5QzQwdUlrZVh2Mk84VGFsblVFV2x5d3JPR0lveTA9)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmljaDlZMmtaTm1mYnJlOXIxbmZGNUNyNjVQcHFSYWtkXzJaZXloOWZHUS1OejJWLWZMMS1FdVpqX284RVVPaXB1QlBiR1hlZ3QxNHBveUlGU1BWVFQ3T1RYamc9PQ==)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmljaDlZMGpVRFhzUGF0SnpnNXkzVG0xVGRWM0lyVGh5dnNRSlE3QnZPOEV5ZTNmcGg5LXg2TmEzcUt6MkFYR0JvaVZSRVI3UlNldnhCdTgxTGV1M1BQSElUR1k0SkMzQzZiT0MtS2llbUZMX0tjSktkRmFBcFU4aVJEa1g5LVNzZmxPRFc0dHVlZ2ZSbXZXYk5raU5DdWF5NEdUcU1JUHhsWTRSY0ZkRHdLTnFMdExOOXduMDhGRG0xUlZmaWtraklTdkJXMGM3N1lDRmpEQ1NHczFCVmZpcEpOWHpBR0NZYnhqNmlHZmpWcGEwVjBFck9oUWlXT1dmVGMwVGZCc00zRmZFY0FOUGI0STB5VDZoRlVqRXZEZmY5R0RfbXRGT2NWRmNJZlhLQmtuOTlHelVvVlZDWXM4TUhFSm5hMWdsN2tvbU9JT3JpMGpYUFlEWnBmemtlTWYzc3dKUkZwQ1RTZGhKNklSandDX01haTlJVHgzd3NsdzlySTJSckV1SUtvVzcyTEVfdkVDUnRTeFpQRTZaQUNlN0hSRUNlUkhySy1ZQmZaSmszY2FRTnNGaFRDd05WUUc0aUQyWUxObUwtc20zT0E0NjBPZmpKT1pxekQ1SjFITU9sZnEwUFE2cGtQRzNzRXNlN2lYLTRpWHRUcGNPaGk2YllVU1piN3YyZkVaYXhPZ0NkU21NdjNwaDJELTF5WDVjWU0zMlgzUnlaT2pCT0Z0UzdaemN5Y2NRU0FqTl9Xd1FhdDBNc2tqOWs2TVBsa1dYbU1yQ2laWEV3S00ybXdjMGl1V3pHNG1vN3ZLb1Q0ZkE3Q0luYlFHX2lRdjhxcHQ5ZnFhWlhSZ2QxcEZvSXBWWkpfbXJ6c1pkaW1GVnFXNWExd2ZJTkVRS3FCWHU2TmI2UFdpWU9fVmQyZ3VuOHB6bjNRVFhrV0ZhMXhqd3RaOVpxWTFoT1ZXUWxuRGYtMTZ1V01ralNETy1DdkFPdW5YTEt6anNDTi1tSWVlc3hlQnN1YmwwQUM1d0dUdkF5YUJzUEQ4VmwxUDBGR21ZT2J6XzJyWUY1WEpKdUwtRXJXckx5aFZ5ZXpHZnYwYlpQWjdRRDlRV203R0pPZHBmZ0pIR0pVSm9jWFpSWmlUNWM4RDNlWU5SdEZaR0MzWVlfNnhuV1IyNndnTFJZdWlUcDh0cVBpUDdaYTVsNHBvUnlMMUpKWW5SRktBNk5xb3F5YWo3VXBBQkQ2bWFsUlZGN1dKMU9sWTJXQzhCOTBZbTNhWWw5a0RCMlRZdS1PM1N1RVpXd19xZzJmZkEwNEhHaVAwZ0Y1RVRLbFY1Uy1RblJoYjA3RkU5c01CNDc3dy16YmM3Q0ppSE1tc2c1S1dwdGxGNVNTQk81ZTBYZzMweXlTMGJXcnpXcC0zNjFnX3RxWk01Y1dPQ25IcXdkRmF3a3YzWW82eHFNU3FZbG82MEpSMS1hT2JKaEVldFNhaHl5S05MQ1hkVHdsdzI1SHJldWdnaUh5YUdMbnhoRlRBaHB0dHctWlVYZG1FWDE2d0Voc0dhQU9qM0RtTk5LdTJXd2hBUGtscWhJWE1RQVhmNnhhNlVvblVMOFFjbHh2elk1d0tCaDRfemtrRldlc0o1MUxfLWxMTUEwMzhKSTBvLUZ4NDdsZ1lGaFoteXBqOWhkQ1VPeVFrZkVjVjZnTG5SM1BsWmN6WDM2dzdWMzYtWU5udjBPSHJHcUt6U2tTMG5jWU1zcmVHRlNkR1VFSElSV1YydlRkcmlic0dpblFZbjZ4VE82SlFWMFpBamc3VnFUUnh1YmhURHlWRWJaV214dmYtbmdyRlZINDFOdVdaT05WVkJWNkxZb2tpR3ZYaWpfNzgwSk1BZmwzYktacS1TVGhzMFQxVVFfY3hLaWlQRFpUSE1Yc043enNCQlJHVmVBeURxZ2FXa3FIaUt1SkhzRjhNdnhaenNZV05GMXdBekRJVUt4WUZqX0xNc2pQbEszRkhyWUE5YUFuYXdMaHlJcWpfb1pPLXBCZXAzT2hmNGJBekEwcHM1MGV0MGpta0FfRGpqUS1OcktLVWZwSmF4b0ZGVXZlLXh2MEFyQU5FeTZIMVZtbE9lNndyOU9KZVFoNTBJU1Zkc2FmNWJoSnJLbkFzMFBGUzRBZkpGS1JtU1JOeGphQXo0NzVHVV9Ic29VY2txcmFiaUFLTzJ5WF9VTEhDeHB2MHh0c25FVFRGZmwzbW1TQkI3bnRmX0o5WU1BVFdlaXBvWmY3bVItLUJ0eVUyS01MYmd2aGVlZXQyaWVYcklpVVJ0REFaOWR2cmtZakw5STEyTDNCRDBxQzRJa3dRbUpPdXFRMjdYcHc3S09uNGF1T1VndXFsZDJ4VkFxNFhhdkZ0cDlUcnFoOEJVdHlCMm02MkYzN0NaMl9kdXZFeDBNRkxpYTNFdlQtTDJJS0FvSmJ6MG1lLXNxQzlta3hFeElmYmwwQ1ZsNExaMmhGQ1Y1Q0tXbEdnUFFRYkJiTnBOTDlhMkFpM3d5dmlIQnVOVVdfMmpsVjB0bTVzazVmUkE3UTByc0NkVTkwREhoMm1yNmNUWjBqdnIycmlnVGZxclkwQW5Hd0FKX3U4bjJtQUNjblllMlFhSDY3bGhwMG43QURyVEU2S0dWWVVJeDRMcUZseWhuZ1NZY2lST1ZRQm1Qa1d4VDhOVFZsNE5ubE5lTDBfTnhrYmd0enluNHl0dU94YjhBQVVQcnozQjBNSmxjTUxuTkJuT3UtLTRraTBfZjZTRVdoZ0VLVGFRSm05TnBuRVhGaTlPRG5jWGkzSXN1MzRVZzlNZkNrNExpYzNjY1dLNWVqVlNSbngxV0NHUTRQQlhTeTA2cWRudmRFcVRpcmtvQWNrR0pjVGtlWnFmZkZwTXBPem1CVm11X0JGMHkzRXVaZkVBd1A2ZnV5dmU3cS1iMXhyTE0yYkx4RlJxV0JhSnAtdXQxU29ia2VkdU8zTGFJVF9URGZNeXlEcnhDemJaQjFmZ3JJVFNSRHZHbVNIZkdIeXp5VU1JYlpWMjBPLW5HTmNMZmdQakhkaEpXSHEtSldvbFZWOTU5)
        APP_STORE_CONNECT_ISSUER_ID: de4a206c-7100-496e-83a5-73e673af6c85
        APP_STORE_CONNECT_KEY_IDENTIFIER: 647N3684PB
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhnNThFU3pqNHhsMjN0dWo3bnEteFZfU0ViT3lxTndETDhWS0FKX3ZtTGVtdlJVX19jaHc2T1hDMHNkVHpTVkR6NTNFM3BKSjBCaThYWFBZYjFqZXlaOWluXzU2T3doSm9ZcG1YcURRb2E5cS1MRnl2c3M3UU9oeHphRWFRZ1lQRUltbGt2YnJvTkkwTE9ncjVUdHFNR19DU0pOdFFFOUhya3hpVTVsTzVwdHJjRjg4N2lLTWdjdDZrZ2JMVlYweVg4Z2xUcFZWaUhPNGJtSjI2YlZWR21IZmNzaGZBZVozY2dUSVJtRGVOdndNZGxHT25kdS02UXZ6WkpvYndReWUtdm5UdWJlR1ZOYzBXQmFpcXEtZDVMNmc2MnZhOUJRUWhjN0ZrdmlkRDRfMmJRNmgwNlVveFV6WWgxU005Z2JKV3NVejZWZlNLc3hneXRmeVJfTEFMeExzcm1rTDhiTHYtV2s0SndWT0gtS2E5clptTUhxWk52eWRMMm1tQUlESmRSeXFaTVJMaFZ0ZHdTWHlTZUwtc2J5RlhsNEJOZlNvY1NSY3pRd3JtZGJkbHg2ST0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhnNThFc1BBVTdKODhvMWFJX2pwX0NicXRsc3FPSmlUb3M2Rk54VTZ0SUIzR0pKaUVBRzlhTENoNTdHdFFFYTRNbTNPMXdHeEZSWGFzUHU1MWdfOTIyOFFLQUV5UXBIc1FpQ1hXQnFZeWVDNzlYblJsOUdHNmdBUGRVcmMyUHRRRjFHTzdEREtjZkY3RF9IdWZNWjJHR0RyUmxBcVFMY1hfVDh5X3BQUkMtaHh0dzU2RHQ3OXhnYV82RXlnQWZzWXQ4dHFPcXRJOFhqQmtHYTAwbndDWDlOdVR2YVBsS1J2OG83TExBM184c2RObzNxbEN1UVpNT21MamZnYUJPZUVTdnV2NEQxaVktNzdwVDdKVktVNEltNWxRTElOMGNNYlpHbmlVS1JFRWdneUl4NUhOTVpXUl90dW54N1pzUEZNTENWQWZJVTNiTlJtSnVxUXc2N2JwWVRIZnNMazU4WW51Tm1UdVpTQlhaVUVBRHFJSEdPY3FrS0ZMRXY4dDJhZzVVNWd2ejlRYVFUOThINHlodVhUdkQteHVNQVFkSVlGWVF0b2k3cXNPeTYySFdYUDctWVZVX0RXczBlUi00ZUw1ZUtkQTRBNE5xTmhNam1NdUdZVUlwNTJUR2FWZlFCYzFoTHhMY1lqeGQ5TEppY3pGNjNkUDNuMmtGWmNucmpSTV9idnEwbjZPQW8zRG9wc1c1QVhGWlZyVDVDWENCX2Q0ai0weGltUjV0dE1POEc1bmpHUXNHUTVDbG1OYWctWFgwQUpVVDNSMzVIVzBWWENUMFpiOV9KZE43X0lPbUNrNFJvNHZycjlHSmE5XzlWMENoTlhwT2d2YUEtQTV1MlM0ZURPSTc1aUVMZHFvUGZEMEpFTmhFUExHWDBZdVpCZ1dIQ1BJWUc5dm9qRndPMDR6cGY1U0VVSG1vWHRIQlc4YzVUZ0FibWtxa2R2V3NEZG41VUlQcWMzcDREY1AxUkxDVGtsN1FUZjRSV3k5bUQ5LXJwZ2NXaHQ0ZHZMMXBGQm5DNlY3TUYtSUs4RmJpR3BUY29MOGR2RUJ4VGpjWmhUNXpBTUd2TzF6NkVNekhjd3NTZkJDNnBuaDNFZklhREhaVW5ReTI4ZWt0Um4xX2lkaHp6LUFoSEJlMDBHbWFiU2V1QVRBb2IxbWVTSDNlQ2QyUFpqMy1KV1o0ODJRU2d1aUFHMEtwb1RycDBFclZ3UF9BMGZ1QUNXQV9HNVpQN1dRcHV5NEU3MzdyYnVNTHVNc3RfV3hiTF8wVGJlNU9WNzNUeklBR2dmS0FhTEtUUEJfNTZCTnlmN2duRFFaRzZmd2ZNbXRsdWJ2cUV0dFYyUWhTejk1NkVSVlJuT0M0Q1ljWGR4MGdrTFFSNkxFdzNNQWhwWmo0OFVGZ3k5UmdUb1d5am9kVkF3Qmp3OXBqbXVCRlAwVmZoVFYyb05yQ0U4WS1COUNVUGxjX3RhcGQ1RlVJdDhsSEFXR0hmZm0zR3E0aXlFUHhDLU5hY3Bjai1xS01iZXVZYWRDTDJtYy1xZldwaTF5V1BNNU9hdlpPclA5ZC00TTJmb2NDNHBRS3dlWmlsZ0ZxM3VCUUNaX3RvRXBKU1hIR2J5S3B0REUxeTJUZUt0T19xUXNsMngxdjd3UEJlVHFKV3VRc05RS1puMmZoYU4xbHJObTJJeGREbkdRek1RSlZqczMtZ0s1em1FWTExTENNYndGMmc1dkRQVjRlalJLZ2tzWEJFWGk2R2tWNVJEb0pYZ1pCdUZBUTZ4bXItTGRFSG9lZnhsNEI1NjB5c3BLR2NzWHlYQzFnZlVJWnIzZ3NFOEFIVERaVGoyeWN3ZWpOMnFPd3ZUUmdBUUtBUlY4NktYQzVGVWh3aEs5bC1teFFyRmg2UTZYVUlmN3pOWGt4dVR3RTM5VzFVMXQ2T3hJR2FRVDhsR2p4bm5RSXo5OEVENFloZkVscDZDUVdNRnNQRDVwRndmdWx3c2xzQXpDbV9sRUV3ZmtYWlROUzZSTGdURkFTRTVxY2JabFNGXzZVY29DVEpucmNwNW4xejV2dWFNN2ZyWXkxOU05NmFqR29LYTF0MGJENFl2Wk5WcVVPcHFBVzIxUmlSVUxiX3dkS0pGZEt1aUFxWFl4Q0Y0ODFvTEtaOHNvMlY3Q0pXa0tEYzNOU1JHcUR2ZGlzN19URlVnTnh4ZzZ5OUNMOUtMaVA3TjRjdFFpWHc2aE1NTE5wQkhXdEFya2NhMDVwWktEOXVSZjM1V0lzZm83aGZJOFliNWFWa3VJdEpDLUg3SHN5WEVqTW1MUHoxV0J4Y2dCOTBFZVdpM09mSU9aY0JYWkFoZDAwcFhZd1VSUUtUUjFzZHA4M2xTY3pSUEZneVlXdEE2bnVmU1dqbFY4WWxZXzFNNE5ZQW42cThBOS1fMllWMXR0c3htYU1YMVlLSEEyLXNQcm9vOW15dUl3RkF0dzgxV29aU3R4VzI0Z19NTzJjQ3ZMRFFPUlcwZ0FrRmNhaWF3YWJ0QW41clhpWTNZbEdCa1hCelNoUWVtVlpQSjRUWjNHN1gzWHdCT0dsY1lHbTVTb3pERk5OZGpXb2tURklrb3NRdjRyUU5XWm9RcWFuUXpkckhRNHlSYXJFSWVpY0VDYVl5OFBtQ3lfRGpVTkY3VFk3Q00zNnZqRlh2UkdrZUZxdEV1OGV4alFldFVLZUVJYmxpZFpNbkF6RDlJaVRrNDl4Rm5yUVprd2Z2RTRKUGtzc0k3NDdUZ1ZxbV9rMTV0ZVpvQTFDU2pteGMtVVJxSmVVMnFNcEZ1WEM1TW5BdF8wVDRFU0ZtMnYzaGlnYlJ2bnRNMHVuN1dXNC1XZFJxRlppSGo3Uy04ZHJnRnRid1hLWDd1aVd1eVhCYUdRVzVWNE8tSGxyUV9ERUx0bGk1MjdnRXZVdllKUFVVdHZma2ZPWE1oQTJ2dWc2YjVBb3c3cmVZNWVHMENQQURjRmJnejRfV1lnODhNZlhxc0RFMmVpdkZwVWh1Z3pWXzVwRWtmZ1M0aE1hX0dyOTNGZm5obzlEdkZuMko5VWEtX09zQjRhdU1GRTE3Z2Q4R2RE)
      flutter: stable
      xcode: latest
      cocoapods: default
    triggering:
      events:
        - push
      branch_patterns: 
        - pattern: staging
      cancel_previous_builds: true
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - 'build appbundle '
      - flutter build appbundle --release --flavor staging --target lib/main_staging.dart
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "tech.getcrunch.crunch.stg" --type IOS_APP_STORE
        --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --release --flavor staging --target lib/main_staging.dart --export-options-plist=~/export_options.plist
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
    publishing:
      email:
        recipients:
          - joel.rose@code.berlin
          - crunchapp2021@gmail.com
      slack:
        channel: '#codemagic-pipeline'
        notify_on_build_start: false
      firebase:
        firebase_token: Encrypted(Z0FBQUFBQmlZcDdsYkhSVHRpUGZwT3dvdzZxS1JYb3oyN3NOWi1NdDJCM2YzTWR3Ump5ZVUtMTlXQW1rSUpQSUdLYXh5QWc0VXpYWlJqdlR1RE1SNEM5M2IyODJSYzJyaXAxTWVRRE5wUF9XYXhNNnh0SkpXenlDTmswWHRvVUg1UmI2NVdCNTRTbGw=)
        ios:
          app_id: 1:295391330962:ios:d811921ced4c9ce30edc4b
          groups:
            - ios
        android:
          app_id: 1:295391330962:android:4c7bb1bdc57fc1360edc4b
          groups:
            - android
